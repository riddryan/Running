M = reshape([1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,mpelvis,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,mpelvis,0.0,0.0,0.0,0.0,0.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-q4.*sin(q3),q4.*sin(q5),q4.*sin(q5),0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,sin(q5),sin(q3),sin(q3),0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,ltoe.*cos(q5),0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-lheel.*sin(q6),lheel.*cos(q6),0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[15,15]);

F = [u1;u2;u3;u4;u5;u6;l1+g.*mpelvis.*sin(gslope)+cleg.*u4.*sin(q5).*2.0;l2+l3+cleg.*u4.*sin(q3).*2.0-g.*mpelvis.*cos(gslope);achillesangle.*kachilles-cachilles.*u3+cachilles.*u6-kachilles.*q3+kachilles.*q6-l1.*q4.*sin(q3)+l2.*q4.*sin(q5)+l3.*q4.*sin(q5);kleg.*lleg+cleg.*u4-kleg.*q4+l2.*sin(q3)+l1.*sin(q5)+l3.*sin(q3);footangle.*kfoot-cfoot.*u5+cfoot.*u6-kfoot.*q5+kfoot.*q6+l3.*ltoe.*cos(q5);cachilles.*(u3-u6)+cfoot.*(u5-u6)-kachilles.*(achillesangle-q3+q6)-kfoot.*(footangle-q5+q6)+l2.*lheel.*cos(q6)-l1.*lheel.*sin(q6);u3.*(u4.*sin(q3)+q4.*u3.*sin(q5))+u3.*u4.*sin(q3)+lheel.*u6.^2.*cos(q6);-u3.*(u4.*sin(q5)-q4.*u3.*sin(q3))-u3.*u4.*sin(q5)+lheel.*u6.^2.*sin(q6);-u3.*(u4.*sin(q5)-q4.*u3.*sin(q3))-u3.*u4.*sin(q5)+ltoe.*u5.^2.*sin(q5)];

