(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 9.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[     93735,       2495]
NotebookOptionsPosition[     91674,       2429]
NotebookOutlinePosition[     92022,       2444]
CellTagsIndexPosition[     91979,       2441]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.638543199516*^9, 3.638543200696*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 StyleBox["Initialization", "Subtitle"], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Needs", "[", "\"\<DynamicsWorkbench`\>\"", "]"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"workdir", " ", "=", " ", 
   RowBox[{"Directory", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"savename", " ", "=", " ", 
   RowBox[{
   "workdir", " ", "<>", " ", "\"\<\\\\RetractSLIP_Aerial_sephips.m\>\""}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"NewModel", "[", "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.638543223027*^9, 3.638543241002*^9}, {
   3.6435581250598*^9, 3.6435581255058002`*^9}, 3.6435582148848*^9, {
   3.6435590242888002`*^9, 3.6435590255688*^9}, {3.6435680525518*^9, 
   3.6435680532788*^9}}],

Cell[BoxData["Initialization"], "Output",
 CellChangeTimes->{
  3.63854464898*^9, 3.638548204918*^9, 3.638548693874*^9, 
   3.6385490643570004`*^9, 3.6387152312635*^9, 3.6387152785065002`*^9, 
   3.6387153231215*^9, {3.6387159281095*^9, 3.6387159388535*^9}, 
   3.6387159705675*^9, 3.6387160557615*^9, 3.6387161376875*^9, 
   3.6387165495585003`*^9, 3.6387168513535*^9, 3.638808072851*^9, 
   3.638808124942*^9, {3.6400158814639997`*^9, 3.640015910058*^9}, {
   3.6435581054337997`*^9, 3.6435581280558*^9}, 3.6435582223087997`*^9, 
   3.6435582913538*^9, 3.6435590832108*^9, 3.6435592293677998`*^9, 
   3.6435594114618*^9, 3.6435595458078003`*^9, {3.6435602972448*^9, 
   3.6435603265067997`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   StyleBox["Equations", "Subtitle"], 
   StyleBox[" ", "Subtitle"], 
   StyleBox["of", "Subtitle"], " ", 
   StyleBox["Motion", "Subtitle"]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  StyleBox["Set", "Section"], 
  StyleBox[" ", "Section"], 
  StyleBox["up", "Section"], " ", 
  StyleBox["Bodies", "Section"]}], "\[IndentingNewLine]", 
 StyleBox["Pelvis", "Subsection"], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AddBody", "[", 
   RowBox[{"pelvisx", ",", "ground", ",", "Slider", ",", 
    RowBox[{"TAxis", "\[Rule]", 
     RowBox[{"ground", "[", "1", "]"}]}], ",", 
    RowBox[{"Qdof", "\[Rule]", "1"}], ",", 
    RowBox[{"Udof", "\[Rule]", "1"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AddBody", "[", 
   RowBox[{"pelvis", ",", "pelvisx", ",", "Slider", ",", 
    RowBox[{"TAxis", "\[Rule]", 
     RowBox[{"ground", "[", "2", "]"}]}], ",", 
    RowBox[{"Mass", "\[Rule]", "mpelvis"}], ",", 
    RowBox[{"Qdof", "\[Rule]", "2"}], ",", 
    RowBox[{"Udof", "\[Rule]", "2"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 StyleBox[
  RowBox[{"Stance", " ", "Leg"}], "Subsection"], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AddBody", "[", 
   RowBox[{"leghinge1", ",", "pelvis", ",", "Hinge", ",", 
    RowBox[{"Axis", "\[Rule]", 
     RowBox[{"ground", "[", "3", "]"}]}], ",", 
    RowBox[{"InbToJnt", "\[Rule]", "0"}], ",", 
    RowBox[{"BodyToJnt", "\[Rule]", "0"}], ",", 
    RowBox[{"RelativeTo", "\[Rule]", "ground"}], ",", 
    RowBox[{"Qdof", "\[Rule]", "3"}], ",", 
    RowBox[{"Udof", "\[Rule]", "3"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AddBody", "[", 
   RowBox[{"foot1", ",", " ", "leghinge1", ",", " ", "Slider", ",", 
    RowBox[{"TAxis", "\[Rule]", 
     RowBox[{"leghinge1", "[", "1", "]"}]}], ",", 
    RowBox[{"Mass", "\[Rule]", "mfoot"}], ",", 
    RowBox[{"InbToJnt", "->", "0"}], ",", 
    RowBox[{"BodyToJnt", "\[Rule]", "0"}], ",", 
    RowBox[{"Qdof", "\[Rule]", "4"}], ",", 
    RowBox[{"Udof", "\[Rule]", "4"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 StyleBox[
  RowBox[{"Swing", " ", "Leg"}], "Subsection"], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AddBody", "[", 
   RowBox[{"leghinge2", ",", "pelvis", ",", "Hinge", ",", 
    RowBox[{"Axis", "\[Rule]", 
     RowBox[{"ground", "[", "3", "]"}]}], ",", 
    RowBox[{"InbToJnt", "\[Rule]", "0"}], ",", 
    RowBox[{"BodyToJnt", "\[Rule]", "0"}], ",", 
    RowBox[{"RelativeTo", "\[Rule]", "ground"}], ",", 
    RowBox[{"Qdof", "\[Rule]", "5"}], ",", 
    RowBox[{"Udof", "\[Rule]", "5"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AddBody", "[", 
   RowBox[{"foot2", ",", " ", "leghinge2", ",", " ", "Slider", ",", 
    RowBox[{"TAxis", "\[Rule]", 
     RowBox[{"leghinge2", "[", "1", "]"}]}], ",", 
    RowBox[{"Mass", "\[Rule]", "mfoot"}], ",", 
    RowBox[{"InbToJnt", "->", "0"}], ",", 
    RowBox[{"BodyToJnt", "\[Rule]", "0"}], ",", 
    RowBox[{"Qdof", "\[Rule]", "6"}], ",", 
    RowBox[{"Udof", "\[Rule]", "6"}]}], "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.638543223027*^9, 3.638543241002*^9}, {3.638543276396*^9,
   3.6385432834849997`*^9}, {3.6385433209630003`*^9, 3.638543361314*^9}}],

Cell[BoxData[
 RowBox[{"Equations", " ", "Motion", " ", "of"}]], "Output",
 CellChangeTimes->{
  3.638544650704*^9, 3.6385482049379997`*^9, 3.638548693894*^9, 
   3.638549064377*^9, 3.6387152312985*^9, 3.6387152785445004`*^9, 
   3.6387153231584997`*^9, {3.6387159281495*^9, 3.6387159388935003`*^9}, 
   3.6387159706075*^9, 3.6387160558005*^9, 3.6387161377215*^9, 
   3.6387165496055*^9, 3.6387168513955*^9, 3.638808072881*^9, 
   3.638808124972*^9, {3.640015881863*^9, 3.6400159100959997`*^9}, {
   3.6435581055467997`*^9, 3.6435581280908003`*^9}, 3.6435582223428*^9, 
   3.6435582913858*^9, 3.6435590832427998`*^9, 3.6435592293988*^9, 
   3.6435594114948*^9, 3.6435595458398*^9, {3.6435602972827997`*^9, 
   3.6435603265458*^9}}],

Cell[BoxData[
 RowBox[{"{", "}"}]], "Output",
 CellChangeTimes->{
  3.638544650704*^9, 3.6385482049379997`*^9, 3.638548693894*^9, 
   3.638549064377*^9, 3.6387152312985*^9, 3.6387152785445004`*^9, 
   3.6387153231584997`*^9, {3.6387159281495*^9, 3.6387159388935003`*^9}, 
   3.6387159706075*^9, 3.6387160558005*^9, 3.6387161377215*^9, 
   3.6387165496055*^9, 3.6387168513955*^9, 3.638808072881*^9, 
   3.638808124972*^9, {3.640015881863*^9, 3.6400159100959997`*^9}, {
   3.6435581055467997`*^9, 3.6435581280908003`*^9}, 3.6435582223428*^9, 
   3.6435582913858*^9, 3.6435590832427998`*^9, 3.6435592293988*^9, 
   3.6435594114948*^9, 3.6435595458398*^9, {3.6435602972827997`*^9, 
   3.6435603265488*^9}}],

Cell[BoxData["Pelvis"], "Output",
 CellChangeTimes->{
  3.638544650704*^9, 3.6385482049379997`*^9, 3.638548693894*^9, 
   3.638549064377*^9, 3.6387152312985*^9, 3.6387152785445004`*^9, 
   3.6387153231584997`*^9, {3.6387159281495*^9, 3.6387159388935003`*^9}, 
   3.6387159706075*^9, 3.6387160558005*^9, 3.6387161377215*^9, 
   3.6387165496055*^9, 3.6387168513955*^9, 3.638808072881*^9, 
   3.638808124972*^9, {3.640015881863*^9, 3.6400159100959997`*^9}, {
   3.6435581055467997`*^9, 3.6435581280908003`*^9}, 3.6435582223428*^9, 
   3.6435582913858*^9, 3.6435590832427998`*^9, 3.6435592293988*^9, 
   3.6435594114948*^9, 3.6435595458398*^9, {3.6435602972827997`*^9, 
   3.6435603265498*^9}}],

Cell[BoxData[
 RowBox[{"Leg", " ", "Stance"}]], "Output",
 CellChangeTimes->{
  3.638544650704*^9, 3.6385482049379997`*^9, 3.638548693894*^9, 
   3.638549064377*^9, 3.6387152312985*^9, 3.6387152785445004`*^9, 
   3.6387153231584997`*^9, {3.6387159281495*^9, 3.6387159388935003`*^9}, 
   3.6387159706075*^9, 3.6387160558005*^9, 3.6387161377215*^9, 
   3.6387165496055*^9, 3.6387168513955*^9, 3.638808072881*^9, 
   3.638808124972*^9, {3.640015881863*^9, 3.6400159100959997`*^9}, {
   3.6435581055467997`*^9, 3.6435581280908003`*^9}, 3.6435582223428*^9, 
   3.6435582913858*^9, 3.6435590832427998`*^9, 3.6435592293988*^9, 
   3.6435594114948*^9, 3.6435595458398*^9, {3.6435602972827997`*^9, 
   3.6435603265518*^9}}],

Cell[BoxData[
 RowBox[{"Leg", " ", "Swing"}]], "Output",
 CellChangeTimes->{
  3.638544650704*^9, 3.6385482049379997`*^9, 3.638548693894*^9, 
   3.638549064377*^9, 3.6387152312985*^9, 3.6387152785445004`*^9, 
   3.6387153231584997`*^9, {3.6387159281495*^9, 3.6387159388935003`*^9}, 
   3.6387159706075*^9, 3.6387160558005*^9, 3.6387161377215*^9, 
   3.6387165496055*^9, 3.6387168513955*^9, 3.638808072881*^9, 
   3.638808124972*^9, {3.640015881863*^9, 3.6400159100959997`*^9}, {
   3.6435581055467997`*^9, 3.6435581280908003`*^9}, 3.6435582223428*^9, 
   3.6435582913858*^9, 3.6435590832427998`*^9, 3.6435592293988*^9, 
   3.6435594114948*^9, 3.6435595458398*^9, {3.6435602972827997`*^9, 
   3.6435603265797997`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    StyleBox[
     RowBox[{"Apply", " ", "Forces"}], "Section"], " ", 
    StyleBox["&", "Section"]}], 
   StyleBox[" ", "Section"], 
   StyleBox["Torques", "Section"]}], 
  StyleBox[" ", "Section"]}], "\[IndentingNewLine]", 
 RowBox[{
  StyleBox["Gravity", "Subsection"], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  StyleBox[
   RowBox[{"AppFrc", "[", 
    RowBox[{"pelvis", ",", " ", 
     RowBox[{
      RowBox[{"Mass", "[", "pelvis", "]"}], " ", "grav"}], ",", " ", "0"}], 
    "]"}], "Input"], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AppFrc", "[", 
   RowBox[{"foot1", ",", " ", 
    RowBox[{
     RowBox[{"Mass", "[", "foot1", "]"}], " ", "grav"}], ",", " ", "0"}], 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"AppFrc", "[", 
    RowBox[{"foot2", ",", " ", 
     RowBox[{
      RowBox[{"Mass", "[", "foot2", "]"}], "grav"}], ",", "0"}], "]"}], ";"}],
   "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   StyleBox["grav", "Input"], 
   StyleBox[" ", "Input"], 
   StyleBox["=", "Input"], 
   StyleBox[" ", "Input"], 
   RowBox[{
    StyleBox["g", "Input"], 
    StyleBox[" ", "Input"], 
    RowBox[{
     StyleBox["(", "Input"], 
     RowBox[{
      RowBox[{
       RowBox[{
        StyleBox["-", "Input"], 
        RowBox[{"Cos", "[", "gslope", "]"}]}], 
       RowBox[{"ground", "[", "2", "]"}]}], " ", "+", " ", 
      RowBox[{
       RowBox[{"Sin", "[", "gslope", "]"}], " ", 
       RowBox[{"ground", "[", "1", "]"}]}]}], ")"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  StyleBox["Springs", "Subsection"], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"Stance", " ", "Spring"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AppFrc", "[", 
   RowBox[{"pelvis", ",", " ", 
    RowBox[{"kswing", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"q", "[", "4", "]"}], " ", "-", " ", "swingl"}], ")"}], " ", 
     RowBox[{"leghinge1", "[", "1", "]"}]}], ",", " ", "0"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"AppFrc", "[", 
    RowBox[{"foot1", ",", " ", 
     RowBox[{
      RowBox[{"-", "kswing"}], 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"q", "[", "4", "]"}], " ", "-", " ", "swingl"}], ")"}], " ", 
      RowBox[{"leghinge1", "[", "1", "]"}]}], ",", " ", "0"}], "]"}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"Swing", " ", "Spring"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AppFrc", "[", 
   RowBox[{"pelvis", ",", " ", 
    RowBox[{"kswing", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"q", "[", "6", "]"}], " ", "-", " ", "swingl"}], ")"}], " ", 
     RowBox[{"leghinge2", "[", "1", "]"}]}], ",", " ", "0"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"AppFrc", "[", 
    RowBox[{"foot2", ",", " ", 
     RowBox[{
      RowBox[{"-", "kswing"}], 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"q", "[", "6", "]"}], " ", "-", " ", "swingl"}], ")"}], " ", 
      RowBox[{"leghinge2", "[", "1", "]"}]}], ",", " ", "0"}], "]"}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"Hip", " ", "Spring"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AppTrq", "[", 
   RowBox[{"leghinge1", ",", " ", 
    RowBox[{"khip", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"-", 
        RowBox[{"q", "[", "3", "]"}]}], " ", "-", "hipl"}], ")"}], " ", 
     RowBox[{"ground", "[", "3", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"AppTrq", "[", 
    RowBox[{"leghinge2", ",", " ", 
     RowBox[{"khip", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"-", 
         RowBox[{"q", "[", "5", "]"}]}], "-", "hipl"}], ")"}], " ", 
      RowBox[{"ground", "[", "3", "]"}]}]}], "]"}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  StyleBox["Dampers", "Subsection"], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"Stance", " ", "Damper"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AppFrc", "[", 
   RowBox[{"pelvis", ",", " ", 
    RowBox[{"cswing", 
     RowBox[{"(", 
      RowBox[{"u", "[", "4", "]"}], ")"}], " ", 
     RowBox[{"leghinge1", "[", "1", "]"}]}], ",", " ", "0"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"AppFrc", "[", 
    RowBox[{"foot1", ",", " ", 
     RowBox[{
      RowBox[{"-", "cswing"}], 
      RowBox[{"(", 
       RowBox[{"u", "[", "4", "]"}], ")"}], " ", 
      RowBox[{"leghinge1", "[", "1", "]"}]}], ",", " ", "0"}], "]"}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"Swing", " ", "Damper"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AppFrc", "[", 
   RowBox[{"pelvis", ",", " ", 
    RowBox[{"cswing", 
     RowBox[{"(", 
      RowBox[{"u", "[", "6", "]"}], ")"}], " ", 
     RowBox[{"leghinge2", "[", "1", "]"}]}], ",", " ", "0"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"AppFrc", "[", 
    RowBox[{"foot2", ",", " ", 
     RowBox[{
      RowBox[{"-", "cswing"}], 
      RowBox[{"(", 
       RowBox[{"u", "[", "6", "]"}], ")"}], " ", 
      RowBox[{"leghinge2", "[", "1", "]"}]}], ",", " ", "0"}], "]"}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"Swing", " ", "Damper"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AppTrq", "[", 
   RowBox[{"leghinge1", ",", " ", 
    RowBox[{
     RowBox[{"-", "chip"}], 
     RowBox[{"(", 
      RowBox[{"u", "[", "3", "]"}], ")"}], " ", 
     RowBox[{"ground", "[", "3", "]"}]}]}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"AppTrq", "[", 
    RowBox[{"leghinge2", ",", " ", 
     RowBox[{"chip", 
      RowBox[{"(", 
       RowBox[{"-", 
        RowBox[{"u", "[", "5", "]"}]}], ")"}], " ", 
      RowBox[{"ground", "[", "3", "]"}]}]}], "]"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"eom", " ", "=", " ", 
   RowBox[{"EOM", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"MM", ",", "rhs"}], "}"}], "=", 
   RowBox[{
    RowBox[{"MassMatrix", "[", "eom", "]"}], "//", "Simplify"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MMtop", " ", "=", " ", 
   RowBox[{
    RowBox[{"MM", "[", 
     RowBox[{"[", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2"}], "}"}], "]"}], "]"}], " ", "//.", " ", 
    RowBox[{"{", 
     RowBox[{"mfoot", "\[Rule]", "0"}], "}"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MMbot", " ", "=", " ", 
   RowBox[{
    RowBox[{"MM", "[", 
     RowBox[{"[", 
      RowBox[{"{", 
       RowBox[{"3", ",", "4", ",", "5", ",", "6"}], "}"}], "]"}], "]"}], " ", 
    "//.", " ", 
    RowBox[{"{", 
     RowBox[{"mfoot", "\[Rule]", "1"}], "}"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rhstop", " ", "=", " ", 
   RowBox[{
    RowBox[{"rhs", "[", 
     RowBox[{"[", 
      RowBox[{"{", 
       RowBox[{"1", ",", "2"}], "}"}], "]"}], "]"}], " ", "//.", " ", 
    RowBox[{"{", 
     RowBox[{"mfoot", "\[Rule]", "0"}], "}"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rhsbot", " ", "=", " ", 
   RowBox[{
    RowBox[{"rhs", "[", 
     RowBox[{"[", 
      RowBox[{"{", 
       RowBox[{"3", ",", "4", ",", "5", ",", "6"}], "}"}], "]"}], "]"}], " ", 
    "//.", " ", 
    RowBox[{"{", 
     RowBox[{"mfoot", "\[Rule]", "1"}], "}"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MM", " ", "=", " ", 
   RowBox[{"Join", "[", 
    RowBox[{"MMtop", ",", "MMbot"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rhs", "  ", "=", " ", 
   RowBox[{"Join", "[", 
    RowBox[{"rhstop", ",", "rhsbot"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", "MM", "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", "rhs", "]"}]}], "Input",
 CellChangeTimes->{{3.638543402567*^9, 3.638543540449*^9}, {
   3.6385437534370003`*^9, 3.638543850486*^9}, {3.638543978748*^9, 
   3.63854407583*^9}, {3.638548177789*^9, 3.638548180553*^9}, {
   3.638548670149*^9, 3.6385486859779997`*^9}, {3.638549058711*^9, 
   3.638549059751*^9}, {3.6387152283905*^9, 3.6387152766475*^9}, {
   3.6387153154855003`*^9, 3.6387153189895*^9}, {3.6387158748615*^9, 
   3.6387158790515003`*^9}, {3.6387159134195004`*^9, 
   3.6387160658345003`*^9}, {3.6387161006025*^9, 3.6387161343234997`*^9}, {
   3.6387162227305*^9, 3.6387162264595003`*^9}, {3.6387162872885*^9, 
   3.6387163362174997`*^9}, {3.638725066817*^9, 3.638725084465*^9}, {
   3.638725127369*^9, 3.638725130336*^9}, {3.638725741243*^9, 
   3.638725775631*^9}, 3.6388081213120003`*^9, {3.6388083799300003`*^9, 
   3.63880839502*^9}, 3.638808612742*^9, {3.638809124546*^9, 
   3.638809140363*^9}, {3.6435580646818*^9, 3.6435580811868*^9}, {
   3.6435582790538*^9, 3.6435582889888*^9}, {3.6435590315018*^9, 
   3.6435590586868*^9}, {3.6435680602398*^9, 3.6435680997738*^9}}],

Cell[BoxData[
 RowBox[{"Torques", " ", 
  RowBox[{"(", 
   RowBox[{
    RowBox[{"Apply", " ", "Forces"}], "&"}], ")"}]}]], "Output",
 CellChangeTimes->{
  3.638544650914*^9, 3.638548204968*^9, 3.638548693924*^9, 3.638549064417*^9, 
   3.6387152313805*^9, 3.6387152786064997`*^9, 3.6387153232155*^9, {
   3.6387159282125*^9, 3.6387159389545*^9}, 3.6387159706654997`*^9, 
   3.6387160558605003`*^9, 3.6387161377805*^9, {3.6387163066085*^9, 
   3.6387163382585*^9}, 3.6387165496685*^9, 3.6387168514525003`*^9, 
   3.6388080729309998`*^9, 3.6388081250220003`*^9, 3.6388091291140003`*^9, {
   3.640015881981*^9, 3.6400159101400003`*^9}, {3.6435580850218*^9, 
   3.6435581281888*^9}, 3.6435582223817997`*^9, 3.6435582914547997`*^9, 
   3.6435590833747997`*^9, 3.6435592294418*^9, 3.6435594115408*^9, 
   3.6435595459038*^9, {3.6435602973538*^9, 3.6435603266188*^9}}],

Cell[BoxData["Gravity"], "Output",
 CellChangeTimes->{
  3.638544650914*^9, 3.638548204968*^9, 3.638548693924*^9, 3.638549064417*^9, 
   3.6387152313805*^9, 3.6387152786064997`*^9, 3.6387153232155*^9, {
   3.6387159282125*^9, 3.6387159389545*^9}, 3.6387159706654997`*^9, 
   3.6387160558605003`*^9, 3.6387161377805*^9, {3.6387163066085*^9, 
   3.6387163382585*^9}, 3.6387165496685*^9, 3.6387168514525003`*^9, 
   3.6388080729309998`*^9, 3.6388081250220003`*^9, 3.6388091291140003`*^9, {
   3.640015881981*^9, 3.6400159101400003`*^9}, {3.6435580850218*^9, 
   3.6435581281888*^9}, 3.6435582223817997`*^9, 3.6435582914547997`*^9, 
   3.6435590833747997`*^9, 3.6435592294418*^9, 3.6435594115408*^9, 
   3.6435595459038*^9, {3.6435602973538*^9, 3.6435603266218*^9}}],

Cell[BoxData["Springs"], "Output",
 CellChangeTimes->{
  3.638544650914*^9, 3.638548204968*^9, 3.638548693924*^9, 3.638549064417*^9, 
   3.6387152313805*^9, 3.6387152786064997`*^9, 3.6387153232155*^9, {
   3.6387159282125*^9, 3.6387159389545*^9}, 3.6387159706654997`*^9, 
   3.6387160558605003`*^9, 3.6387161377805*^9, {3.6387163066085*^9, 
   3.6387163382585*^9}, 3.6387165496685*^9, 3.6387168514525003`*^9, 
   3.6388080729309998`*^9, 3.6388081250220003`*^9, 3.6388091291140003`*^9, {
   3.640015881981*^9, 3.6400159101400003`*^9}, {3.6435580850218*^9, 
   3.6435581281888*^9}, 3.6435582223817997`*^9, 3.6435582914547997`*^9, 
   3.6435590833747997`*^9, 3.6435592294418*^9, 3.6435594115408*^9, 
   3.6435595459038*^9, {3.6435602973538*^9, 3.6435603266228*^9}}],

Cell[BoxData["Dampers"], "Output",
 CellChangeTimes->{
  3.638544650914*^9, 3.638548204968*^9, 3.638548693924*^9, 3.638549064417*^9, 
   3.6387152313805*^9, 3.6387152786064997`*^9, 3.6387153232155*^9, {
   3.6387159282125*^9, 3.6387159389545*^9}, 3.6387159706654997`*^9, 
   3.6387160558605003`*^9, 3.6387161377805*^9, {3.6387163066085*^9, 
   3.6387163382585*^9}, 3.6387165496685*^9, 3.6387168514525003`*^9, 
   3.6388080729309998`*^9, 3.6388081250220003`*^9, 3.6388091291140003`*^9, {
   3.640015881981*^9, 3.6400159101400003`*^9}, {3.6435580850218*^9, 
   3.6435581281888*^9}, 3.6435582223817997`*^9, 3.6435582914547997`*^9, 
   3.6435590833747997`*^9, 3.6435592294418*^9, 3.6435594115408*^9, 
   3.6435595459038*^9, {3.6435602973538*^9, 3.6435603266247997`*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"mpelvis", "0", "0", "0", "0", "0"},
     {"0", "mpelvis", "0", "0", "0", "0"},
     {
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "3"], "]"}]}], " ", 
       SubscriptBox["q", "4"]}], 
      RowBox[{
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "3"], "]"}], " ", 
       SubscriptBox["q", "4"]}], 
      SubsuperscriptBox["q", "4", "2"], "0", "0", "0"},
     {
      RowBox[{"Cos", "[", 
       SubscriptBox["q", "3"], "]"}], 
      RowBox[{"Sin", "[", 
       SubscriptBox["q", "3"], "]"}], "0", "1", "0", "0"},
     {
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "5"], "]"}]}], " ", 
       SubscriptBox["q", "6"]}], 
      RowBox[{
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "5"], "]"}], " ", 
       SubscriptBox["q", "6"]}], "0", "0", 
      SubsuperscriptBox["q", "6", "2"], "0"},
     {
      RowBox[{"Cos", "[", 
       SubscriptBox["q", "5"], "]"}], 
      RowBox[{"Sin", "[", 
       SubscriptBox["q", "5"], "]"}], "0", "0", "0", "1"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.638544650914*^9, 3.638548204968*^9, 3.638548693924*^9, 3.638549064417*^9, 
   3.6387152313805*^9, 3.6387152786064997`*^9, 3.6387153232155*^9, {
   3.6387159282125*^9, 3.6387159389545*^9}, 3.6387159706654997`*^9, 
   3.6387160558605003`*^9, 3.6387161377805*^9, {3.6387163066085*^9, 
   3.6387163382585*^9}, 3.6387165496685*^9, 3.6387168514525003`*^9, 
   3.6388080729309998`*^9, 3.6388081250220003`*^9, 3.6388091291140003`*^9, {
   3.640015881981*^9, 3.6400159101400003`*^9}, {3.6435580850218*^9, 
   3.6435581281888*^9}, 3.6435582223817997`*^9, 3.6435582914547997`*^9, 
   3.6435590833747997`*^9, 3.6435592294418*^9, 3.6435594115408*^9, 
   3.6435595459038*^9, {3.6435602973538*^9, 3.6435603266678*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", 
   TagBox[GridBox[{
      {
       RowBox[{"g", " ", "mpelvis", " ", 
        RowBox[{"Sin", "[", "gslope", "]"}]}]},
      {
       RowBox[{
        RowBox[{"-", "g"}], " ", "mpelvis", " ", 
        RowBox[{"Cos", "[", "gslope", "]"}]}]},
      {
       RowBox[{
        RowBox[{"hipl", " ", "khip"}], "-", 
        RowBox[{"khip", " ", 
         SubscriptBox["q", "3"]}], "+", 
        RowBox[{"khip", " ", 
         SubscriptBox["q", "5"]}], "-", 
        RowBox[{"chip", " ", 
         SubscriptBox["u", "3"]}], "-", 
        RowBox[{
         SubscriptBox["q", "4"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"g", " ", 
            RowBox[{"Cos", "[", 
             RowBox[{"gslope", "-", 
              SubscriptBox["q", "3"]}], "]"}]}], "+", 
           RowBox[{"2", " ", 
            SubscriptBox["u", "3"], " ", 
            SubscriptBox["u", "4"]}]}], ")"}]}], "+", 
        RowBox[{"chip", " ", 
         SubscriptBox["u", "5"]}]}]},
      {
       RowBox[{
        RowBox[{"kswing", " ", "swingl"}], "+", 
        RowBox[{"g", " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"gslope", "-", 
           SubscriptBox["q", "3"]}], "]"}]}], "+", 
        RowBox[{
         SubscriptBox["q", "4"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "kswing"}], "+", 
           SubsuperscriptBox["u", "3", "2"]}], ")"}]}], "-", 
        RowBox[{"cswing", " ", 
         SubscriptBox["u", "4"]}]}]},
      {
       RowBox[{
        RowBox[{
         RowBox[{"-", "khip"}], " ", 
         RowBox[{"(", 
          RowBox[{"hipl", "-", 
           SubscriptBox["q", "3"], "+", 
           SubscriptBox["q", "5"]}], ")"}]}], "-", 
        RowBox[{"g", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{"gslope", "-", 
           SubscriptBox["q", "5"]}], "]"}], " ", 
         SubscriptBox["q", "6"]}], "+", 
        RowBox[{"chip", " ", 
         RowBox[{"(", 
          RowBox[{
           SubscriptBox["u", "3"], "-", 
           SubscriptBox["u", "5"]}], ")"}]}], "-", 
        RowBox[{"2", " ", 
         SubscriptBox["q", "6"], " ", 
         SubscriptBox["u", "5"], " ", 
         SubscriptBox["u", "6"]}]}]},
      {
       RowBox[{
        RowBox[{"kswing", " ", "swingl"}], "+", 
        RowBox[{"g", " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"gslope", "-", 
           SubscriptBox["q", "5"]}], "]"}]}], "+", 
        RowBox[{
         SubscriptBox["q", "6"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "kswing"}], "+", 
           SubsuperscriptBox["u", "5", "2"]}], ")"}]}], "-", 
        RowBox[{"cswing", " ", 
         SubscriptBox["u", "6"]}]}]}
     },
     GridBoxAlignment->{
      "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}},
        "RowsIndexed" -> {}},
     GridBoxSpacings->{"Columns" -> {
         Offset[0.27999999999999997`], {
          Offset[0.5599999999999999]}, 
         Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
         Offset[0.2], {
          Offset[0.4]}, 
         Offset[0.2]}, "RowsIndexed" -> {}}],
    Column], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.638544650914*^9, 3.638548204968*^9, 3.638548693924*^9, 3.638549064417*^9, 
   3.6387152313805*^9, 3.6387152786064997`*^9, 3.6387153232155*^9, {
   3.6387159282125*^9, 3.6387159389545*^9}, 3.6387159706654997`*^9, 
   3.6387160558605003`*^9, 3.6387161377805*^9, {3.6387163066085*^9, 
   3.6387163382585*^9}, 3.6387165496685*^9, 3.6387168514525003`*^9, 
   3.6388080729309998`*^9, 3.6388081250220003`*^9, 3.6388091291140003`*^9, {
   3.640015881981*^9, 3.6400159101400003`*^9}, {3.6435580850218*^9, 
   3.6435581281888*^9}, 3.6435582223817997`*^9, 3.6435582914547997`*^9, 
   3.6435590833747997`*^9, 3.6435592294418*^9, 3.6435594115408*^9, 
   3.6435595459038*^9, {3.6435602973538*^9, 3.6435603266708*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  StyleBox["Energy", "Subtitle"], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
     StyleBox["gravE", "Input"], 
     StyleBox[" ", "Input"], 
     StyleBox["=", "Input"], 
     StyleBox[" ", "Input"], 
     RowBox[{
      StyleBox["-", "Input"], 
      RowBox[{
       StyleBox["(", "Input"], 
       RowBox[{
        RowBox[{
         RowBox[{"Mass", "[", "pelvis", "]"}], " ", 
         RowBox[{"grav", ".", 
          RowBox[{"PosCOM", "[", "pelvis", "]"}]}]}], " ", "+", " ", 
        RowBox[{
         RowBox[{"Mass", "[", "foot1", "]"}], " ", 
         RowBox[{"grav", ".", 
          RowBox[{"PosCOM", "[", "foot1", "]"}]}]}], " ", "+", " ", 
        RowBox[{
         RowBox[{"Mass", "[", "foot2", "]"}], " ", 
         RowBox[{"grav", ".", 
          RowBox[{"PosCOM", "[", "foot2", "]"}]}]}]}], ")"}]}]}], ";"}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   StyleBox["gravE", "Input"], 
   StyleBox[" ", "Input"], 
   StyleBox["=", "Input"], 
   StyleBox[" ", "Input"], 
   RowBox[{
    StyleBox["-", "Input"], 
    RowBox[{
     StyleBox["(", "Input"], 
     RowBox[{
      RowBox[{"Mass", "[", "pelvis", "]"}], " ", 
      RowBox[{"grav", ".", 
       RowBox[{"PosCOM", "[", "pelvis", "]"}]}]}], ")"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"springE", " ", "=", " ", "0"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"PE", " ", "=", " ", 
    RowBox[{
     RowBox[{"gravE", " ", "+", " ", "springE"}], " ", "//", " ", 
     "Simplify"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"stanceE", " ", "=", " ", 
   RowBox[{
    RowBox[{"1", "/", "2"}], " ", "kswing", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"q", "[", "4", "]"}], " ", "-", " ", "swingl"}], ")"}], "^", 
     "2"}]}]}], " ", ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"swingE", " ", "=", " ", 
   RowBox[{
    RowBox[{"1", "/", "2"}], "kswing", 
    RowBox[{
     RowBox[{"(", 
      RowBox[{
       RowBox[{"q", "[", "6", "]"}], "-", "swingl"}], ")"}], "^", "2"}]}]}], 
  " ", ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"hipE", " ", "=", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"1", "/", "2"}], "khip", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", 
          RowBox[{"q", "[", "3", "]"}]}], "-", "hipl"}], ")"}], "^", "2"}]}], 
     "+", 
     RowBox[{
      RowBox[{"1", "/", "2"}], "khip", 
      RowBox[{
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", 
          RowBox[{"q", "[", "5", "]"}]}], "-", "hipl"}], ")"}], "^", 
       "2"}]}]}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"gravE2", " ", "=", " ", 
   RowBox[{"-", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"grav", ".", 
       RowBox[{"PosCOM", "[", "foot1", "]"}]}], " ", "+", " ", 
      RowBox[{"grav", ".", 
       RowBox[{"PosCOM", "[", "foot2", "]"}]}]}], ")"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"springE2", " ", "=", " ", 
   RowBox[{"stanceE", " ", "+", " ", "swingE", " ", "+", " ", "hipE"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"PE2", " ", "=", " ", 
    RowBox[{"gravE2", " ", "+", " ", "springE2"}]}], ";"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"KE", " ", "=", " ", 
     RowBox[{
      RowBox[{
       RowBox[{"1", "/", "2"}], 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{"Mass", "[", "pelvis", "]"}], " ", 
          RowBox[{
           RowBox[{"VelCOM", "[", "pelvis", "]"}], ".", 
           RowBox[{"VelCOM", "[", "pelvis", "]"}]}]}], " ", "+", " ", 
         RowBox[{
          RowBox[{"Mass", "[", "foot1", "]"}], " ", 
          RowBox[{
           RowBox[{"VelCOM", "[", "foot1", "]"}], ".", 
           RowBox[{"VelCOM", "[", "foot1", "]"}]}]}], "+", 
         RowBox[{
          RowBox[{"Mass", "[", "foot2", "]"}], " ", 
          RowBox[{
           RowBox[{"VelCOM", "[", "foot2", "]"}], ".", 
           RowBox[{"VelCOM", "[", "foot2", "]"}]}]}]}], " ", ")"}]}], " ", "//",
       " ", "Simplify"}]}], ";"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"KE", " ", "=", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"1", "/", "2"}], 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"Mass", "[", "pelvis", "]"}], " ", 
       RowBox[{
        RowBox[{"VelCOM", "[", "pelvis", "]"}], ".", 
        RowBox[{"VelCOM", "[", "pelvis", "]"}]}]}], ")"}]}], "//", " ", 
    "Simplify"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"KE2", " ", "=", " ", 
   RowBox[{
    RowBox[{"1", "/", "2"}], 
    RowBox[{"(", 
     RowBox[{
      RowBox[{
       RowBox[{"Mass", "[", "foot1", "]"}], " ", 
       RowBox[{
        RowBox[{"VelCOM", "[", "foot1", "]"}], ".", 
        RowBox[{"VelCOM", "[", "foot1", "]"}]}]}], "+", 
      RowBox[{
       RowBox[{"Mass", "[", "foot2", "]"}], " ", 
       RowBox[{
        RowBox[{"VelCOM", "[", "foot2", "]"}], ".", 
        RowBox[{"VelCOM", "[", "foot2", "]"}]}]}]}], ")"}]}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.638543561019*^9, 3.638543630803*^9}, {3.63854399366*^9, 
   3.638544003417*^9}, {3.6387164780095*^9, 3.6387164988385*^9}, 
   3.6387168488905*^9, {3.6435592881008*^9, 3.6435593860018*^9}, {
   3.6435595303198*^9, 3.6435595396228*^9}, {3.6435601883538*^9, 
   3.6435602270587997`*^9}, {3.6435681082208*^9, 3.6435681214768*^9}}],

Cell[BoxData["Energy"], "Output",
 CellChangeTimes->{
  3.638544651414*^9, 3.6385482050880003`*^9, 3.6385486939639997`*^9, 
   3.6385490644969997`*^9, 3.6387152317625*^9, 3.6387152786975*^9, 
   3.6387153233005*^9, {3.6387159283005*^9, 3.6387159390385*^9}, 
   3.6387159707525*^9, 3.6387160561355*^9, 3.6387161378754997`*^9, 
   3.6387165497655*^9, 3.6387168515305*^9, 3.638808073001*^9, 
   3.638808125072*^9, {3.6400158822980003`*^9, 3.640015910416*^9}, {
   3.6435581062468*^9, 3.6435581283688*^9}, 3.6435582224578*^9, 
   3.6435582915327997`*^9, 3.6435590835418*^9, 3.6435592295148*^9, 
   3.6435594116218*^9, 3.6435595459788*^9, {3.6435602974368*^9, 
   3.6435603267038*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  StyleBox["Constraints", "Subtitle"], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"velfoot", " ", "=", 
   RowBox[{
    RowBox[{"VelCOM", "[", "foot1", "]"}], " ", "//", " ", "Simplify"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"footconstraintx", "=", " ", 
   RowBox[{
    RowBox[{"velfoot", ".", " ", 
     RowBox[{"ground", "[", "1", "]"}]}], " ", "\[Equal]", " ", "0"}]}], " ", 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"footconstrainty", " ", "=", " ", 
    RowBox[{
     RowBox[{"velfoot", ".", " ", 
      RowBox[{"ground", "[", "2", "]"}]}], " ", "\[Equal]", " ", "0"}]}], " ",
    ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"definitionsOfQDots", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{"D", "[", 
       RowBox[{
        RowBox[{"q", "[", "1", "]"}], ",", " ", "t"}], "]"}], "->", " ", 
      RowBox[{"u", "[", "1", "]"}]}], ",", " ", 
     RowBox[{
      RowBox[{"D", "[", 
       RowBox[{
        RowBox[{"q", "[", "2", "]"}], ",", " ", "t"}], "]"}], "->", " ", 
      RowBox[{"u", "[", "2", "]"}]}], " ", ",", " ", 
     RowBox[{
      RowBox[{"D", "[", 
       RowBox[{
        RowBox[{"q", "[", "3", "]"}], ",", " ", "t"}], "]"}], "->", " ", 
      RowBox[{"u", "[", "3", "]"}]}], ",", " ", 
     RowBox[{
      RowBox[{"D", "[", 
       RowBox[{
        RowBox[{"q", "[", "4", "]"}], ",", " ", "t"}], "]"}], "->", " ", 
      RowBox[{"u", "[", "4", "]"}]}], ",", " ", 
     RowBox[{
      RowBox[{"D", "[", 
       RowBox[{
        RowBox[{"q", "[", "5", "]"}], ",", " ", "t"}], "]"}], "->", " ", 
      RowBox[{"u", "[", "5", "]"}]}], ",", " ", 
     RowBox[{
      RowBox[{"D", "[", 
       RowBox[{
        RowBox[{"q", "[", "6", "]"}], ",", " ", "t"}], "]"}], "->", " ", 
      RowBox[{"u", "[", "6", "]"}]}]}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"allVelocityVariables", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"u", "[", "1", "]"}], ",", 
     RowBox[{"u", "[", "2", "]"}], ",", 
     RowBox[{"u", "[", "3", "]"}], ",", 
     RowBox[{"u", "[", "4", "]"}], ",", 
     RowBox[{"u", "[", "5", "]"}], ",", 
     RowBox[{"u", "[", "6", "]"}]}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"constraintJacobianStance", " ", "=", " ", 
   RowBox[{"LinearTerms", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"footconstraintx", "[", 
        RowBox[{"[", "1", "]"}], "]"}], ",", 
       RowBox[{"footconstrainty", "[", 
        RowBox[{"[", "1", "]"}], "]"}]}], "}"}], ",", 
     "allVelocityVariables"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"constraintJacobianStanceDot", " ", "=", 
    RowBox[{
     RowBox[{"D", "[", 
      RowBox[{"constraintJacobianStance", ",", " ", "t"}], "]"}], " ", "//.", 
     " ", "definitionsOfQDots"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"bigM", " ", "=", " ", 
   RowBox[{"Join", "[", 
    RowBox[{
     RowBox[{"Join", "[", 
      RowBox[{"MM", ",", 
       RowBox[{"-", 
        RowBox[{"Transpose", "[", "constraintJacobianStance", "]"}]}], ",", 
       "2"}], "]"}], ",", 
     RowBox[{"Join", "[", 
      RowBox[{"constraintJacobianStance", ",", 
       RowBox[{"ConstantArray", "[", 
        RowBox[{"0", ",", 
         RowBox[{"{", 
          RowBox[{"2", ",", "2"}], "}"}]}], "]"}], ",", "2"}], "]"}], ",", 
     "1"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"bigRHS", " ", "=", " ", 
   RowBox[{"Join", "[", 
    RowBox[{"rhs", ",", 
     RowBox[{"-", 
      RowBox[{"constraintJacobianStanceDot", ".", "allVelocityVariables"}]}], 
     ",", "1"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", "bigM", "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", "bigRHS", "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", "constraintJacobianStance", 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Solve", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"footconstraintx", ",", "footconstrainty"}], "}"}], ",", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"u", "[", "3", "]"}], ",", 
      RowBox[{"u", "[", "4", "]"}]}], "}"}]}], "]"}], " ", "//", " ", 
  "Simplify"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"MatrixForm", "[", "constraintJacobianStance", "]"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"Swing", " ", "Leg", " ", "Equations"}], "\[IndentingNewLine]", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{
   RowBox[{"bigM", "[", 
    RowBox[{"[", 
     RowBox[{"{", 
      RowBox[{"5", ",", "6"}], "}"}], "]"}], "]"}], " ", "//.", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"mfoot", "\[Rule]", "1"}], ",", 
     RowBox[{"gslope", "\[Rule]", "0"}], ",", 
     RowBox[{"chip", "\[Rule]", "0"}], ",", 
     RowBox[{"cswing", "\[Rule]", "0"}], ",", 
     RowBox[{"cstance", "\[Rule]", "0"}]}], "}"}]}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"MatrixForm", "[", 
  RowBox[{
   RowBox[{"bigRHS", "[", 
    RowBox[{"[", 
     RowBox[{"{", 
      RowBox[{"5", ",", "6"}], "}"}], "]"}], "]"}], " ", "//.", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"mfoot", "\[Rule]", "1"}], ",", 
     RowBox[{"gslope", "\[Rule]", "0"}], ",", 
     RowBox[{"chip", "\[Rule]", "0"}], ",", 
     RowBox[{"cswing", "\[Rule]", "0"}], ",", 
     RowBox[{"cstance", "\[Rule]", "0"}]}], "}"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.638543653901*^9, 3.638543738993*^9}, {3.638544087907*^9,
    3.638544096821*^9}, {3.638724992935*^9, 3.638724999889*^9}, 
   3.638725054184*^9, {3.63872516891*^9, 3.638725257726*^9}, {
   3.638725310005*^9, 3.638725337455*^9}, {3.6387257901289997`*^9, 
   3.638725796113*^9}, {3.6388080449519997`*^9, 3.638808059216*^9}, {
   3.638808105137*^9, 3.638808107887*^9}, 3.6388083748059998`*^9, 
   3.6388091443310003`*^9, {3.638812039756*^9, 3.638812049251*^9}, {
   3.638812182376*^9, 3.638812247311*^9}, {3.638812329637*^9, 
   3.638812331854*^9}, {3.638889502303*^9, 3.6388895085439997`*^9}, {
   3.640351565855*^9, 3.640351732776*^9}, {3.640351766932*^9, 
   3.640351931342*^9}}],

Cell[BoxData["Constraints"], "Output",
 CellChangeTimes->{
  3.638544652124*^9, 3.638548205098*^9, 3.638548693984*^9, 3.638549064517*^9, 
   3.6387152325095*^9, 3.6387152787314997`*^9, 3.6387153233365*^9, {
   3.6387159283375*^9, 3.6387159390755*^9}, 3.6387159707904997`*^9, 
   3.6387160561755*^9, 3.6387161379145*^9, 3.6387165500645*^9, 
   3.6387168515645*^9, 3.638725000262*^9, 3.638725330741*^9, {
   3.638808062409*^9, 3.638808073031*^9}, {3.638808109417*^9, 
   3.638808125102*^9}, 3.6388091446879997`*^9, 3.6388120496610003`*^9, {
   3.638812201597*^9, 3.6388122483710003`*^9}, 3.638812332145*^9, 
   3.638889509068*^9, {3.6400158825629997`*^9, 3.640015910543*^9}, 
   3.640351584759*^9, {3.6403516929969997`*^9, 3.640351733271*^9}, {
   3.6403517676800003`*^9, 3.640351776204*^9}, {3.640351822315*^9, 
   3.640351931782*^9}, {3.6435581065048*^9, 3.6435581284028*^9}, 
   3.6435582224898*^9, 3.6435582915628*^9, 3.6435590835708*^9, 
   3.6435592295408*^9, 3.6435594118568*^9, 3.6435595460067997`*^9, {
   3.6435602974688*^9, 3.6435603267348003`*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"mpelvis", "0", "0", "0", "0", "0", 
      RowBox[{"-", "1"}], "0"},
     {"0", "mpelvis", "0", "0", "0", "0", "0", 
      RowBox[{"-", "1"}]},
     {
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "3"], "]"}]}], " ", 
       SubscriptBox["q", "4"]}], 
      RowBox[{
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "3"], "]"}], " ", 
       SubscriptBox["q", "4"]}], 
      SubsuperscriptBox["q", "4", "2"], "0", "0", "0", 
      RowBox[{
       RowBox[{"Sin", "[", 
        SubscriptBox["q", "3"], "]"}], " ", 
       SubscriptBox["q", "4"]}], 
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Cos", "[", 
         SubscriptBox["q", "3"], "]"}]}], " ", 
       SubscriptBox["q", "4"]}]},
     {
      RowBox[{"Cos", "[", 
       SubscriptBox["q", "3"], "]"}], 
      RowBox[{"Sin", "[", 
       SubscriptBox["q", "3"], "]"}], "0", "1", "0", "0", 
      RowBox[{"-", 
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "3"], "]"}]}], 
      RowBox[{"-", 
       RowBox[{"Sin", "[", 
        SubscriptBox["q", "3"], "]"}]}]},
     {
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "5"], "]"}]}], " ", 
       SubscriptBox["q", "6"]}], 
      RowBox[{
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "5"], "]"}], " ", 
       SubscriptBox["q", "6"]}], "0", "0", 
      SubsuperscriptBox["q", "6", "2"], "0", "0", "0"},
     {
      RowBox[{"Cos", "[", 
       SubscriptBox["q", "5"], "]"}], 
      RowBox[{"Sin", "[", 
       SubscriptBox["q", "5"], "]"}], "0", "0", "0", "1", "0", "0"},
     {"1", "0", 
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "3"], "]"}]}], " ", 
       SubscriptBox["q", "4"]}], 
      RowBox[{"Cos", "[", 
       SubscriptBox["q", "3"], "]"}], "0", "0", "0", "0"},
     {"0", "1", 
      RowBox[{
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "3"], "]"}], " ", 
       SubscriptBox["q", "4"]}], 
      RowBox[{"Sin", "[", 
       SubscriptBox["q", "3"], "]"}], "0", "0", "0", "0"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.638544652124*^9, 3.638548205098*^9, 3.638548693984*^9, 3.638549064517*^9, 
   3.6387152325095*^9, 3.6387152787314997`*^9, 3.6387153233365*^9, {
   3.6387159283375*^9, 3.6387159390755*^9}, 3.6387159707904997`*^9, 
   3.6387160561755*^9, 3.6387161379145*^9, 3.6387165500645*^9, 
   3.6387168515645*^9, 3.638725000262*^9, 3.638725330741*^9, {
   3.638808062409*^9, 3.638808073031*^9}, {3.638808109417*^9, 
   3.638808125102*^9}, 3.6388091446879997`*^9, 3.6388120496610003`*^9, {
   3.638812201597*^9, 3.6388122483710003`*^9}, 3.638812332145*^9, 
   3.638889509068*^9, {3.6400158825629997`*^9, 3.640015910543*^9}, 
   3.640351584759*^9, {3.6403516929969997`*^9, 3.640351733271*^9}, {
   3.6403517676800003`*^9, 3.640351776204*^9}, {3.640351822315*^9, 
   3.640351931782*^9}, {3.6435581065048*^9, 3.6435581284028*^9}, 
   3.6435582224898*^9, 3.6435582915628*^9, 3.6435590835708*^9, 
   3.6435592295408*^9, 3.6435594118568*^9, 3.6435595460067997`*^9, {
   3.6435602974688*^9, 3.6435603267618*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", 
   TagBox[GridBox[{
      {
       RowBox[{"g", " ", "mpelvis", " ", 
        RowBox[{"Sin", "[", "gslope", "]"}]}]},
      {
       RowBox[{
        RowBox[{"-", "g"}], " ", "mpelvis", " ", 
        RowBox[{"Cos", "[", "gslope", "]"}]}]},
      {
       RowBox[{
        RowBox[{"hipl", " ", "khip"}], "-", 
        RowBox[{"khip", " ", 
         SubscriptBox["q", "3"]}], "+", 
        RowBox[{"khip", " ", 
         SubscriptBox["q", "5"]}], "-", 
        RowBox[{"chip", " ", 
         SubscriptBox["u", "3"]}], "-", 
        RowBox[{
         SubscriptBox["q", "4"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"g", " ", 
            RowBox[{"Cos", "[", 
             RowBox[{"gslope", "-", 
              SubscriptBox["q", "3"]}], "]"}]}], "+", 
           RowBox[{"2", " ", 
            SubscriptBox["u", "3"], " ", 
            SubscriptBox["u", "4"]}]}], ")"}]}], "+", 
        RowBox[{"chip", " ", 
         SubscriptBox["u", "5"]}]}]},
      {
       RowBox[{
        RowBox[{"kswing", " ", "swingl"}], "+", 
        RowBox[{"g", " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"gslope", "-", 
           SubscriptBox["q", "3"]}], "]"}]}], "+", 
        RowBox[{
         SubscriptBox["q", "4"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "kswing"}], "+", 
           SubsuperscriptBox["u", "3", "2"]}], ")"}]}], "-", 
        RowBox[{"cswing", " ", 
         SubscriptBox["u", "4"]}]}]},
      {
       RowBox[{
        RowBox[{
         RowBox[{"-", "khip"}], " ", 
         RowBox[{"(", 
          RowBox[{"hipl", "-", 
           SubscriptBox["q", "3"], "+", 
           SubscriptBox["q", "5"]}], ")"}]}], "-", 
        RowBox[{"g", " ", 
         RowBox[{"Cos", "[", 
          RowBox[{"gslope", "-", 
           SubscriptBox["q", "5"]}], "]"}], " ", 
         SubscriptBox["q", "6"]}], "+", 
        RowBox[{"chip", " ", 
         RowBox[{"(", 
          RowBox[{
           SubscriptBox["u", "3"], "-", 
           SubscriptBox["u", "5"]}], ")"}]}], "-", 
        RowBox[{"2", " ", 
         SubscriptBox["q", "6"], " ", 
         SubscriptBox["u", "5"], " ", 
         SubscriptBox["u", "6"]}]}]},
      {
       RowBox[{
        RowBox[{"kswing", " ", "swingl"}], "+", 
        RowBox[{"g", " ", 
         RowBox[{"Sin", "[", 
          RowBox[{"gslope", "-", 
           SubscriptBox["q", "5"]}], "]"}]}], "+", 
        RowBox[{
         SubscriptBox["q", "6"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "kswing"}], "+", 
           SubsuperscriptBox["u", "5", "2"]}], ")"}]}], "-", 
        RowBox[{"cswing", " ", 
         SubscriptBox["u", "6"]}]}]},
      {
       RowBox[{
        RowBox[{
         RowBox[{"Sin", "[", 
          SubscriptBox["q", "3"], "]"}], " ", 
         SubscriptBox["u", "3"], " ", 
         SubscriptBox["u", "4"]}], "-", 
        RowBox[{
         SubscriptBox["u", "3"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"-", 
             RowBox[{"Cos", "[", 
              SubscriptBox["q", "3"], "]"}]}], " ", 
            SubscriptBox["q", "4"], " ", 
            SubscriptBox["u", "3"]}], "-", 
           RowBox[{
            RowBox[{"Sin", "[", 
             SubscriptBox["q", "3"], "]"}], " ", 
            SubscriptBox["u", "4"]}]}], ")"}]}]}]},
      {
       RowBox[{
        RowBox[{
         RowBox[{"-", 
          RowBox[{"Cos", "[", 
           SubscriptBox["q", "3"], "]"}]}], " ", 
         SubscriptBox["u", "3"], " ", 
         SubscriptBox["u", "4"]}], "-", 
        RowBox[{
         SubscriptBox["u", "3"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{
            RowBox[{"-", 
             RowBox[{"Sin", "[", 
              SubscriptBox["q", "3"], "]"}]}], " ", 
            SubscriptBox["q", "4"], " ", 
            SubscriptBox["u", "3"]}], "+", 
           RowBox[{
            RowBox[{"Cos", "[", 
             SubscriptBox["q", "3"], "]"}], " ", 
            SubscriptBox["u", "4"]}]}], ")"}]}]}]}
     },
     GridBoxAlignment->{
      "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}},
        "RowsIndexed" -> {}},
     GridBoxSpacings->{"Columns" -> {
         Offset[0.27999999999999997`], {
          Offset[0.5599999999999999]}, 
         Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
         Offset[0.2], {
          Offset[0.4]}, 
         Offset[0.2]}, "RowsIndexed" -> {}}],
    Column], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.638544652124*^9, 3.638548205098*^9, 3.638548693984*^9, 3.638549064517*^9, 
   3.6387152325095*^9, 3.6387152787314997`*^9, 3.6387153233365*^9, {
   3.6387159283375*^9, 3.6387159390755*^9}, 3.6387159707904997`*^9, 
   3.6387160561755*^9, 3.6387161379145*^9, 3.6387165500645*^9, 
   3.6387168515645*^9, 3.638725000262*^9, 3.638725330741*^9, {
   3.638808062409*^9, 3.638808073031*^9}, {3.638808109417*^9, 
   3.638808125102*^9}, 3.6388091446879997`*^9, 3.6388120496610003`*^9, {
   3.638812201597*^9, 3.6388122483710003`*^9}, 3.638812332145*^9, 
   3.638889509068*^9, {3.6400158825629997`*^9, 3.640015910543*^9}, 
   3.640351584759*^9, {3.6403516929969997`*^9, 3.640351733271*^9}, {
   3.6403517676800003`*^9, 3.640351776204*^9}, {3.640351822315*^9, 
   3.640351931782*^9}, {3.6435581065048*^9, 3.6435581284028*^9}, 
   3.6435582224898*^9, 3.6435582915628*^9, 3.6435590835708*^9, 
   3.6435592295408*^9, 3.6435594118568*^9, 3.6435595460067997`*^9, {
   3.6435602974688*^9, 3.6435603267678003`*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", 
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "3"], "]"}]}], " ", 
       SubscriptBox["q", "4"]}], 
      RowBox[{"Cos", "[", 
       SubscriptBox["q", "3"], "]"}], "0", "0"},
     {"0", "1", 
      RowBox[{
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "3"], "]"}], " ", 
       SubscriptBox["q", "4"]}], 
      RowBox[{"Sin", "[", 
       SubscriptBox["q", "3"], "]"}], "0", "0"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.638544652124*^9, 3.638548205098*^9, 3.638548693984*^9, 3.638549064517*^9, 
   3.6387152325095*^9, 3.6387152787314997`*^9, 3.6387153233365*^9, {
   3.6387159283375*^9, 3.6387159390755*^9}, 3.6387159707904997`*^9, 
   3.6387160561755*^9, 3.6387161379145*^9, 3.6387165500645*^9, 
   3.6387168515645*^9, 3.638725000262*^9, 3.638725330741*^9, {
   3.638808062409*^9, 3.638808073031*^9}, {3.638808109417*^9, 
   3.638808125102*^9}, 3.6388091446879997`*^9, 3.6388120496610003`*^9, {
   3.638812201597*^9, 3.6388122483710003`*^9}, 3.638812332145*^9, 
   3.638889509068*^9, {3.6400158825629997`*^9, 3.640015910543*^9}, 
   3.640351584759*^9, {3.6403516929969997`*^9, 3.640351733271*^9}, {
   3.6403517676800003`*^9, 3.640351776204*^9}, {3.640351822315*^9, 
   3.640351931782*^9}, {3.6435581065048*^9, 3.6435581284028*^9}, 
   3.6435582224898*^9, 3.6435582915628*^9, 3.6435590835708*^9, 
   3.6435592295408*^9, 3.6435594118568*^9, 3.6435595460067997`*^9, {
   3.6435602974688*^9, 3.6435603267698*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     SubscriptBox["u", "3"], "\[Rule]", 
     FractionBox[
      RowBox[{
       RowBox[{
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "3"], "]"}], " ", 
        SubscriptBox["u", "1"]}], "-", 
       RowBox[{
        RowBox[{"Cos", "[", 
         SubscriptBox["q", "3"], "]"}], " ", 
        SubscriptBox["u", "2"]}]}], 
      SubscriptBox["q", "4"]]}], ",", 
    RowBox[{
     SubscriptBox["u", "4"], "\[Rule]", 
     RowBox[{
      RowBox[{"-", 
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "3"], "]"}]}], " ", 
      RowBox[{"(", 
       RowBox[{
        SubscriptBox["u", "1"], "+", 
        RowBox[{
         RowBox[{"Tan", "[", 
          SubscriptBox["q", "3"], "]"}], " ", 
         SubscriptBox["u", "2"]}]}], ")"}]}]}]}], "}"}], "}"}]], "Output",
 CellChangeTimes->{
  3.638544652124*^9, 3.638548205098*^9, 3.638548693984*^9, 3.638549064517*^9, 
   3.6387152325095*^9, 3.6387152787314997`*^9, 3.6387153233365*^9, {
   3.6387159283375*^9, 3.6387159390755*^9}, 3.6387159707904997`*^9, 
   3.6387160561755*^9, 3.6387161379145*^9, 3.6387165500645*^9, 
   3.6387168515645*^9, 3.638725000262*^9, 3.638725330741*^9, {
   3.638808062409*^9, 3.638808073031*^9}, {3.638808109417*^9, 
   3.638808125102*^9}, 3.6388091446879997`*^9, 3.6388120496610003`*^9, {
   3.638812201597*^9, 3.6388122483710003`*^9}, 3.638812332145*^9, 
   3.638889509068*^9, {3.6400158825629997`*^9, 3.640015910543*^9}, 
   3.640351584759*^9, {3.6403516929969997`*^9, 3.640351733271*^9}, {
   3.6403517676800003`*^9, 3.640351776204*^9}, {3.640351822315*^9, 
   3.640351931782*^9}, {3.6435581065048*^9, 3.6435581284028*^9}, 
   3.6435582224898*^9, 3.6435582915628*^9, 3.6435590835708*^9, 
   3.6435592295408*^9, 3.6435594118568*^9, 3.6435595460067997`*^9, {
   3.6435602974688*^9, 3.6435603267728*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {"1", "0", 
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "3"], "]"}]}], " ", 
       SubscriptBox["q", "4"]}], 
      RowBox[{"Cos", "[", 
       SubscriptBox["q", "3"], "]"}], "0", "0"},
     {"0", "1", 
      RowBox[{
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "3"], "]"}], " ", 
       SubscriptBox["q", "4"]}], 
      RowBox[{"Sin", "[", 
       SubscriptBox["q", "3"], "]"}], "0", "0"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.638544652124*^9, 3.638548205098*^9, 3.638548693984*^9, 3.638549064517*^9, 
   3.6387152325095*^9, 3.6387152787314997`*^9, 3.6387153233365*^9, {
   3.6387159283375*^9, 3.6387159390755*^9}, 3.6387159707904997`*^9, 
   3.6387160561755*^9, 3.6387161379145*^9, 3.6387165500645*^9, 
   3.6387168515645*^9, 3.638725000262*^9, 3.638725330741*^9, {
   3.638808062409*^9, 3.638808073031*^9}, {3.638808109417*^9, 
   3.638808125102*^9}, 3.6388091446879997`*^9, 3.6388120496610003`*^9, {
   3.638812201597*^9, 3.6388122483710003`*^9}, 3.638812332145*^9, 
   3.638889509068*^9, {3.6400158825629997`*^9, 3.640015910543*^9}, 
   3.640351584759*^9, {3.6403516929969997`*^9, 3.640351733271*^9}, {
   3.6403517676800003`*^9, 3.640351776204*^9}, {3.640351822315*^9, 
   3.640351931782*^9}, {3.6435581065048*^9, 3.6435581284028*^9}, 
   3.6435582224898*^9, 3.6435582915628*^9, 3.6435590835708*^9, 
   3.6435592295408*^9, 3.6435594118568*^9, 3.6435595460067997`*^9, {
   3.6435602974688*^9, 3.6435603267757998`*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", GridBox[{
     {
      RowBox[{
       RowBox[{"-", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "5"], "]"}]}], " ", 
       SubscriptBox["q", "6"]}], 
      RowBox[{
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "5"], "]"}], " ", 
       SubscriptBox["q", "6"]}], "0", "0", 
      SubsuperscriptBox["q", "6", "2"], "0", "0", "0"},
     {
      RowBox[{"Cos", "[", 
       SubscriptBox["q", "5"], "]"}], 
      RowBox[{"Sin", "[", 
       SubscriptBox["q", "5"], "]"}], "0", "0", "0", "1", "0", "0"}
    },
    GridBoxAlignment->{
     "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}}, 
      "RowsIndexed" -> {}},
    GridBoxSpacings->{"Columns" -> {
        Offset[0.27999999999999997`], {
         Offset[0.7]}, 
        Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
        Offset[0.2], {
         Offset[0.4]}, 
        Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.638544652124*^9, 3.638548205098*^9, 3.638548693984*^9, 3.638549064517*^9, 
   3.6387152325095*^9, 3.6387152787314997`*^9, 3.6387153233365*^9, {
   3.6387159283375*^9, 3.6387159390755*^9}, 3.6387159707904997`*^9, 
   3.6387160561755*^9, 3.6387161379145*^9, 3.6387165500645*^9, 
   3.6387168515645*^9, 3.638725000262*^9, 3.638725330741*^9, {
   3.638808062409*^9, 3.638808073031*^9}, {3.638808109417*^9, 
   3.638808125102*^9}, 3.6388091446879997`*^9, 3.6388120496610003`*^9, {
   3.638812201597*^9, 3.6388122483710003`*^9}, 3.638812332145*^9, 
   3.638889509068*^9, {3.6400158825629997`*^9, 3.640015910543*^9}, 
   3.640351584759*^9, {3.6403516929969997`*^9, 3.640351733271*^9}, {
   3.6403517676800003`*^9, 3.640351776204*^9}, {3.640351822315*^9, 
   3.640351931782*^9}, {3.6435581065048*^9, 3.6435581284028*^9}, 
   3.6435582224898*^9, 3.6435582915628*^9, 3.6435590835708*^9, 
   3.6435592295408*^9, 3.6435594118568*^9, 3.6435595460067997`*^9, {
   3.6435602974688*^9, 3.6435603267808*^9}}],

Cell[BoxData[
 TagBox[
  RowBox[{"(", "\[NoBreak]", 
   TagBox[GridBox[{
      {
       RowBox[{
        RowBox[{
         RowBox[{"-", "khip"}], " ", 
         RowBox[{"(", 
          RowBox[{"hipl", "-", 
           SubscriptBox["q", "3"], "+", 
           SubscriptBox["q", "5"]}], ")"}]}], "-", 
        RowBox[{"g", " ", 
         RowBox[{"Cos", "[", 
          SubscriptBox["q", "5"], "]"}], " ", 
         SubscriptBox["q", "6"]}], "-", 
        RowBox[{"2", " ", 
         SubscriptBox["q", "6"], " ", 
         SubscriptBox["u", "5"], " ", 
         SubscriptBox["u", "6"]}]}]},
      {
       RowBox[{
        RowBox[{"kswing", " ", "swingl"}], "-", 
        RowBox[{"g", " ", 
         RowBox[{"Sin", "[", 
          SubscriptBox["q", "5"], "]"}]}], "+", 
        RowBox[{
         SubscriptBox["q", "6"], " ", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"-", "kswing"}], "+", 
           SubsuperscriptBox["u", "5", "2"]}], ")"}]}]}]}
     },
     GridBoxAlignment->{
      "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, "Rows" -> {{Baseline}},
        "RowsIndexed" -> {}},
     GridBoxSpacings->{"Columns" -> {
         Offset[0.27999999999999997`], {
          Offset[0.5599999999999999]}, 
         Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
         Offset[0.2], {
          Offset[0.4]}, 
         Offset[0.2]}, "RowsIndexed" -> {}}],
    Column], "\[NoBreak]", ")"}],
  Function[BoxForm`e$, 
   MatrixForm[BoxForm`e$]]]], "Output",
 CellChangeTimes->{
  3.638544652124*^9, 3.638548205098*^9, 3.638548693984*^9, 3.638549064517*^9, 
   3.6387152325095*^9, 3.6387152787314997`*^9, 3.6387153233365*^9, {
   3.6387159283375*^9, 3.6387159390755*^9}, 3.6387159707904997`*^9, 
   3.6387160561755*^9, 3.6387161379145*^9, 3.6387165500645*^9, 
   3.6387168515645*^9, 3.638725000262*^9, 3.638725330741*^9, {
   3.638808062409*^9, 3.638808073031*^9}, {3.638808109417*^9, 
   3.638808125102*^9}, 3.6388091446879997`*^9, 3.6388120496610003`*^9, {
   3.638812201597*^9, 3.6388122483710003`*^9}, 3.638812332145*^9, 
   3.638889509068*^9, {3.6400158825629997`*^9, 3.640015910543*^9}, 
   3.640351584759*^9, {3.6403516929969997`*^9, 3.640351733271*^9}, {
   3.6403517676800003`*^9, 3.640351776204*^9}, {3.640351822315*^9, 
   3.640351931782*^9}, {3.6435581065048*^9, 3.6435581284028*^9}, 
   3.6435582224898*^9, 3.6435582915628*^9, 3.6435590835708*^9, 
   3.6435592295408*^9, 3.6435594118568*^9, 3.6435595460067997`*^9, {
   3.6435602974688*^9, 3.6435603267838*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  StyleBox[
   RowBox[{
   "Velocities", " ", "Points", " ", "And", " ", "Other", " ", "Things"}], 
   "Subtitle"], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"totalMass", " ", "=", " ", 
     RowBox[{"(", 
      RowBox[{
       RowBox[{"Mass", "[", "pelvis", "]"}], " ", "+", " ", 
       RowBox[{"Mass", "[", "foot1", "]"}], " ", "+", " ", 
       RowBox[{"Mass", "[", "foot2", "]"}]}], ")"}]}], ";"}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"totalMass", " ", "=", " ", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"Mass", "[", "pelvis", "]"}], " ", "+", " ", 
      RowBox[{"Mass", "[", "foot1", "]"}], " ", "+", " ", 
      RowBox[{"Mass", "[", "foot2", "]"}]}], ")"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"stancefootpos", " ", "=", " ", 
   RowBox[{"PosCOM", "[", "foot1", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pelvpos", " ", "=", " ", 
   RowBox[{"PosCOM", "[", "pelvis", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"swingfootpos", " ", "=", " ", 
    RowBox[{"PosCOM", "[", "foot2", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"stancefootvel", "=", " ", 
   RowBox[{"VelCOM", "[", "foot1", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pelvvel", "=", " ", 
   RowBox[{"VelCOM", "[", "pelvis", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"swingfootvel", "=", " ", 
    RowBox[{"VelCOM", "[", "foot2", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"stancefootvelx", " ", "=", " ", 
  RowBox[{
   RowBox[{"stancefootvel", ".", 
    RowBox[{"ground", "[", "1", "]"}]}], " ", "\[Equal]", " ", 
   "f1"}]}], "\[IndentingNewLine]", 
 RowBox[{"stancefootvely", " ", "=", " ", 
  RowBox[{
   RowBox[{"stancefootvel", ".", 
    RowBox[{"ground", "[", "2", "]"}]}], " ", "\[Equal]", " ", 
   "f2"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Solve", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"stancefootvelx", ",", "stancefootvely"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"u", "[", "3", "]"}], ",", 
       RowBox[{"u", "[", "4", "]"}]}], "}"}]}], "]"}], " ", "//", 
   "Simplify"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"COMpos", "  ", "=", " ", 
     RowBox[{"PosCOM", "[", 
      RowBox[{"{", 
       RowBox[{"pelvis", ",", "foot1", ",", "foot2"}], "}"}], "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"COMvel", " ", "=", " ", 
     RowBox[{"VelCOM", "[", 
      RowBox[{"{", 
       RowBox[{"pelvis", ",", "foot1", ",", "foot2"}], "}"}], "]"}]}], ";"}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"COMpos", "  ", "=", " ", 
   RowBox[{"PosCOM", "[", 
    RowBox[{"{", "pelvis", "}"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"COMvel", " ", "=", " ", 
   RowBox[{"VelCOM", "[", 
    RowBox[{"{", "pelvis", "}"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.6385441624230003`*^9, 3.638544302492*^9}, {
  3.6385445079110003`*^9, 3.6385445722060003`*^9}, {3.6387165056925*^9, 
  3.6387165383075*^9}, {3.640015860708*^9, 3.640015878236*^9}, {
  3.6400159274370003`*^9, 3.6400159703719997`*^9}, {3.6400160755559998`*^9, 
  3.6400160939119997`*^9}, {3.640016162336*^9, 3.64001621762*^9}, {
  3.6400164799560003`*^9, 3.6400164985629997`*^9}, {3.6400165599630003`*^9, 
  3.640016584576*^9}, {3.6400166814189997`*^9, 3.6400166852860003`*^9}, {
  3.640016785951*^9, 3.640016793017*^9}, {3.64002301174*^9, 
  3.640023014582*^9}}],

Cell[BoxData[
 RowBox[{"And", " ", "Other", " ", "Points", " ", "Things", " ", 
  "Velocities"}]], "Output",
 CellChangeTimes->{
  3.638544652144*^9, 3.638548205118*^9, 3.6385486940039997`*^9, 
   3.6385490645369997`*^9, 3.6387152325474997`*^9, 3.6387152787675*^9, 
   3.6387153233785*^9, {3.6387159283745003`*^9, 3.6387159391145*^9}, 
   3.6387159708295*^9, 3.6387160562125*^9, 3.6387161379565*^9, 
   3.6387165501064997`*^9, 3.6387168516005*^9, 3.638808073061*^9, 
   3.638808125172*^9, {3.640015864527*^9, 3.640015910652*^9}, 
   3.640015947358*^9, 3.640016094933*^9, {3.640016193156*^9, 
   3.640016218229*^9}, 3.6400164840699997`*^9, 3.640016585531*^9, 
   3.640016685551*^9, 3.640016794558*^9, 3.640023014975*^9, {
   3.6435581068688*^9, 3.6435581286098003`*^9}, 3.6435582225688*^9, 
   3.6435582916438*^9, 3.6435590836528*^9, 3.6435592296168003`*^9, 
   3.6435594119358*^9, 3.6435595460888*^9, {3.6435602975518*^9, 
   3.6435603268188*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox["u", "1"], "-", 
   RowBox[{
    RowBox[{"Sin", "[", 
     SubscriptBox["q", "3"], "]"}], " ", 
    SubscriptBox["q", "4"], " ", 
    SubscriptBox["u", "3"]}], "+", 
   RowBox[{
    RowBox[{"Cos", "[", 
     SubscriptBox["q", "3"], "]"}], " ", 
    SubscriptBox["u", "4"]}]}], "\[Equal]", "f1"}]], "Output",
 CellChangeTimes->{
  3.638544652144*^9, 3.638548205118*^9, 3.6385486940039997`*^9, 
   3.6385490645369997`*^9, 3.6387152325474997`*^9, 3.6387152787675*^9, 
   3.6387153233785*^9, {3.6387159283745003`*^9, 3.6387159391145*^9}, 
   3.6387159708295*^9, 3.6387160562125*^9, 3.6387161379565*^9, 
   3.6387165501064997`*^9, 3.6387168516005*^9, 3.638808073061*^9, 
   3.638808125172*^9, {3.640015864527*^9, 3.640015910652*^9}, 
   3.640015947358*^9, 3.640016094933*^9, {3.640016193156*^9, 
   3.640016218229*^9}, 3.6400164840699997`*^9, 3.640016585531*^9, 
   3.640016685551*^9, 3.640016794558*^9, 3.640023014975*^9, {
   3.6435581068688*^9, 3.6435581286098003`*^9}, 3.6435582225688*^9, 
   3.6435582916438*^9, 3.6435590836528*^9, 3.6435592296168003`*^9, 
   3.6435594119358*^9, 3.6435595460888*^9, {3.6435602975518*^9, 
   3.6435603268218*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   SubscriptBox["u", "2"], "+", 
   RowBox[{
    RowBox[{"Cos", "[", 
     SubscriptBox["q", "3"], "]"}], " ", 
    SubscriptBox["q", "4"], " ", 
    SubscriptBox["u", "3"]}], "+", 
   RowBox[{
    RowBox[{"Sin", "[", 
     SubscriptBox["q", "3"], "]"}], " ", 
    SubscriptBox["u", "4"]}]}], "\[Equal]", "f2"}]], "Output",
 CellChangeTimes->{
  3.638544652144*^9, 3.638548205118*^9, 3.6385486940039997`*^9, 
   3.6385490645369997`*^9, 3.6387152325474997`*^9, 3.6387152787675*^9, 
   3.6387153233785*^9, {3.6387159283745003`*^9, 3.6387159391145*^9}, 
   3.6387159708295*^9, 3.6387160562125*^9, 3.6387161379565*^9, 
   3.6387165501064997`*^9, 3.6387168516005*^9, 3.638808073061*^9, 
   3.638808125172*^9, {3.640015864527*^9, 3.640015910652*^9}, 
   3.640015947358*^9, 3.640016094933*^9, {3.640016193156*^9, 
   3.640016218229*^9}, 3.6400164840699997`*^9, 3.640016585531*^9, 
   3.640016685551*^9, 3.640016794558*^9, 3.640023014975*^9, {
   3.6435581068688*^9, 3.6435581286098003`*^9}, 3.6435582225688*^9, 
   3.6435582916438*^9, 3.6435590836528*^9, 3.6435592296168003`*^9, 
   3.6435594119358*^9, 3.6435595460888*^9, {3.6435602975518*^9, 
   3.6435603268238*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{
     SubscriptBox["u", "3"], "\[Rule]", 
     FractionBox[
      RowBox[{
       RowBox[{"f2", " ", 
        RowBox[{"Cos", "[", 
         SubscriptBox["q", "3"], "]"}]}], "-", 
       RowBox[{"f1", " ", 
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "3"], "]"}]}], "+", 
       RowBox[{
        RowBox[{"Sin", "[", 
         SubscriptBox["q", "3"], "]"}], " ", 
        SubscriptBox["u", "1"]}], "-", 
       RowBox[{
        RowBox[{"Cos", "[", 
         SubscriptBox["q", "3"], "]"}], " ", 
        SubscriptBox["u", "2"]}]}], 
      SubscriptBox["q", "4"]]}], ",", 
    RowBox[{
     SubscriptBox["u", "4"], "\[Rule]", 
     RowBox[{
      RowBox[{"f1", " ", 
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "3"], "]"}]}], "+", 
      RowBox[{"f2", " ", 
       RowBox[{"Sin", "[", 
        SubscriptBox["q", "3"], "]"}]}], "-", 
      RowBox[{
       RowBox[{"Cos", "[", 
        SubscriptBox["q", "3"], "]"}], " ", 
       SubscriptBox["u", "1"]}], "-", 
      RowBox[{
       RowBox[{"Sin", "[", 
        SubscriptBox["q", "3"], "]"}], " ", 
       SubscriptBox["u", "2"]}]}]}]}], "}"}], "}"}]], "Output",
 CellChangeTimes->{
  3.638544652144*^9, 3.638548205118*^9, 3.6385486940039997`*^9, 
   3.6385490645369997`*^9, 3.6387152325474997`*^9, 3.6387152787675*^9, 
   3.6387153233785*^9, {3.6387159283745003`*^9, 3.6387159391145*^9}, 
   3.6387159708295*^9, 3.6387160562125*^9, 3.6387161379565*^9, 
   3.6387165501064997`*^9, 3.6387168516005*^9, 3.638808073061*^9, 
   3.638808125172*^9, {3.640015864527*^9, 3.640015910652*^9}, 
   3.640015947358*^9, 3.640016094933*^9, {3.640016193156*^9, 
   3.640016218229*^9}, 3.6400164840699997`*^9, 3.640016585531*^9, 
   3.640016685551*^9, 3.640016794558*^9, 3.640023014975*^9, {
   3.6435581068688*^9, 3.6435581286098003`*^9}, 3.6435582225688*^9, 
   3.6435582916438*^9, 3.6435590836528*^9, 3.6435592296168003`*^9, 
   3.6435594119358*^9, 3.6435595460888*^9, {3.6435602975518*^9, 
   3.6435603268538*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 StyleBox[
  RowBox[{"Export", "\[IndentingNewLine]"}], 
  "Subtitle"], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"inGroundFrame2D", "[", "v_", "]"}], " ", ":=", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"v", ".", 
       RowBox[{"ground", "[", "1", "]"}]}], ",", " ", 
      RowBox[{"v", ".", 
       RowBox[{"ground", "[", "2", "]"}]}]}], "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"expressionsToExport", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "constraintJacobianStance", ",", "\"\<constraintJacobianStance\>\""}], 
      "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
      "constraintJacobianStanceDot", ",", 
       "\"\<constraintJacobianStanceDot\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"KE", ",", "\"\<kineticEnergy\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"PE", ",", "\"\<potentialEnergy\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"gravE", ",", "\"\<PEgrav\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"springE", ",", "\"\<PEspring\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"KE2", ",", "\"\<kineticEnergy2\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"PE2", ",", "\"\<potentialEnergy2\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"gravE2", ",", "\"\<PEgrav2\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"springE2", ",", "\"\<PEspring2\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"stanceE", ",", "\"\<stanceE\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"swingE", ",", "\"\<swingE\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"hipE", ",", "\"\<hipE\>\""}], "}"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"inGroundFrame2D", "[", "stancefootpos", "]"}], ",", 
       "\"\<points.stancefoot\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"inGroundFrame2D", "[", "swingfootpos", "]"}], ",", 
       "\"\<points.swingfoot\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"inGroundFrame2D", "[", "pelvpos", "]"}], ",", 
       "\"\<points.pelvis\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"inGroundFrame2D", "[", "COMpos", "]"}], ",", 
       "\"\<points.COM\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"inGroundFrame2D", "[", "stancefootvel", "]"}], ",", 
       "\"\<vels.stancefoot\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"inGroundFrame2D", "[", "swingfootvel", "]"}], ",", 
       "\"\<vels.swingfoot\>\""}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"inGroundFrame2D", "[", "pelvvel", "]"}], ",", 
       "\"\<vels.pelvis\>\""}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"inGroundFrame2D", "[", "COMvel", "]"}], ",", 
       "\"\<vels.COM\>\""}], "}"}]}], "}"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  StyleBox["ExportCode", "Input"], 
  StyleBox["[", "Input"], 
  RowBox[{
   StyleBox[
    RowBox[{"{", 
     RowBox[{"MM", ",", "rhs"}], "}"}], "Input"], ",", 
   RowBox[{"Expressions", "\[Rule]", "expressionsToExport"}], ",", 
   RowBox[{
    StyleBox["OutputFile", "Input"], 
    StyleBox["\[Rule]", "Input"], "savename"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.638544320054*^9, 3.638544478205*^9}, {3.638544579977*^9,
    3.63854462967*^9}, {3.6435593945998*^9, 3.6435594065968*^9}, {
   3.6435602536378*^9, 3.6435602728208*^9}, 3.6435603167158003`*^9}],

Cell[BoxData["Export"], "Output",
 CellChangeTimes->{
  3.638544652224*^9, 3.638548205138*^9, 3.638548694024*^9, 3.638549064557*^9, 
   3.6387152327205*^9, 3.6387152788045*^9, 3.6387153234175*^9, {
   3.6387159284125*^9, 3.6387159391545*^9}, 3.6387159709685*^9, 
   3.6387160562465*^9, 3.6387161380004997`*^9, 3.6387165501455*^9, 
   3.6387168516435003`*^9, 3.638808073091*^9, 3.6388081252019997`*^9, {
   3.640015882834*^9, 3.640015910699*^9}, {3.6435581070638*^9, 
   3.6435581286848*^9}, 3.6435582226078*^9, 3.6435582916837997`*^9, 
   3.6435590837008*^9, 3.6435592296808*^9, 3.6435594119728003`*^9, 
   3.6435595461258*^9, {3.6435602975898*^9, 3.6435603268848*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"1", ",", "0", ",", 
         RowBox[{
          RowBox[{"-", 
           RowBox[{"Sin", "[", 
            SubscriptBox["q", "3"], "]"}]}], " ", 
          SubscriptBox["q", "4"]}], ",", 
         RowBox[{"Cos", "[", 
          SubscriptBox["q", "3"], "]"}], ",", "0", ",", "0"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", "1", ",", 
         RowBox[{
          RowBox[{"Cos", "[", 
           SubscriptBox["q", "3"], "]"}], " ", 
          SubscriptBox["q", "4"]}], ",", 
         RowBox[{"Sin", "[", 
          SubscriptBox["q", "3"], "]"}], ",", "0", ",", "0"}], "}"}]}], "}"}],
      ",", "\<\"constraintJacobianStance\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"0", ",", "0", ",", 
         RowBox[{
          RowBox[{
           RowBox[{"-", 
            RowBox[{"Cos", "[", 
             SubscriptBox["q", "3"], "]"}]}], " ", 
           SubscriptBox["q", "4"], " ", 
           SubscriptBox["u", "3"]}], "-", 
          RowBox[{
           RowBox[{"Sin", "[", 
            SubscriptBox["q", "3"], "]"}], " ", 
           SubscriptBox["u", "4"]}]}], ",", 
         RowBox[{
          RowBox[{"-", 
           RowBox[{"Sin", "[", 
            SubscriptBox["q", "3"], "]"}]}], " ", 
          SubscriptBox["u", "3"]}], ",", "0", ",", "0"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", "0", ",", 
         RowBox[{
          RowBox[{
           RowBox[{"-", 
            RowBox[{"Sin", "[", 
             SubscriptBox["q", "3"], "]"}]}], " ", 
           SubscriptBox["q", "4"], " ", 
           SubscriptBox["u", "3"]}], "+", 
          RowBox[{
           RowBox[{"Cos", "[", 
            SubscriptBox["q", "3"], "]"}], " ", 
           SubscriptBox["u", "4"]}]}], ",", 
         RowBox[{
          RowBox[{"Cos", "[", 
           SubscriptBox["q", "3"], "]"}], " ", 
          SubscriptBox["u", "3"]}], ",", "0", ",", "0"}], "}"}]}], "}"}], 
     ",", "\<\"constraintJacobianStanceDot\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      FractionBox["1", "2"], " ", "mpelvis", " ", 
      RowBox[{"(", 
       RowBox[{
        SubsuperscriptBox["u", "1", "2"], "+", 
        SubsuperscriptBox["u", "2", "2"]}], ")"}]}], 
     ",", "\<\"kineticEnergy\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"g", " ", "mpelvis", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{
         RowBox[{"-", 
          RowBox[{"Sin", "[", "gslope", "]"}]}], " ", 
         SubscriptBox["q", "1"]}], "+", 
        RowBox[{
         RowBox[{"Cos", "[", "gslope", "]"}], " ", 
         SubscriptBox["q", "2"]}]}], ")"}]}], 
     ",", "\<\"potentialEnergy\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{"-", "mpelvis"}], " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"g", " ", 
         RowBox[{"Sin", "[", "gslope", "]"}], " ", 
         SubscriptBox["q", "1"]}], "-", 
        RowBox[{"g", " ", 
         RowBox[{"Cos", "[", "gslope", "]"}], " ", 
         SubscriptBox["q", "2"]}]}], ")"}]}], ",", "\<\"PEgrav\"\>"}], "}"}], 
   ",", 
   RowBox[{"{", 
    RowBox[{"0", ",", "\<\"PEspring\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      FractionBox["1", "2"], " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"mfoot", " ", 
         RowBox[{"(", 
          RowBox[{
           SubsuperscriptBox["u", "1", "2"], "+", 
           SubsuperscriptBox["u", "2", "2"], "-", 
           RowBox[{"2", " ", 
            RowBox[{"Sin", "[", 
             SubscriptBox["q", "3"], "]"}], " ", 
            SubscriptBox["q", "4"], " ", 
            SubscriptBox["u", "1"], " ", 
            SubscriptBox["u", "3"]}], "+", 
           RowBox[{
            SubsuperscriptBox["q", "4", "2"], " ", 
            SubsuperscriptBox["u", "3", "2"]}], "+", 
           RowBox[{"2", " ", 
            RowBox[{"Sin", "[", 
             SubscriptBox["q", "3"], "]"}], " ", 
            SubscriptBox["u", "2"], " ", 
            SubscriptBox["u", "4"]}], "+", 
           SubsuperscriptBox["u", "4", "2"], "+", 
           RowBox[{
            RowBox[{"Cos", "[", 
             SubscriptBox["q", "3"], "]"}], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"2", " ", 
               SubscriptBox["q", "4"], " ", 
               SubscriptBox["u", "2"], " ", 
               SubscriptBox["u", "3"]}], "+", 
              RowBox[{"2", " ", 
               SubscriptBox["u", "1"], " ", 
               SubscriptBox["u", "4"]}]}], ")"}]}]}], ")"}]}], "+", 
        RowBox[{"mfoot", " ", 
         RowBox[{"(", 
          RowBox[{
           SubsuperscriptBox["u", "1", "2"], "+", 
           SubsuperscriptBox["u", "2", "2"], "-", 
           RowBox[{"2", " ", 
            RowBox[{"Sin", "[", 
             SubscriptBox["q", "5"], "]"}], " ", 
            SubscriptBox["q", "6"], " ", 
            SubscriptBox["u", "1"], " ", 
            SubscriptBox["u", "5"]}], "+", 
           RowBox[{
            SubsuperscriptBox["q", "6", "2"], " ", 
            SubsuperscriptBox["u", "5", "2"]}], "+", 
           RowBox[{"2", " ", 
            RowBox[{"Sin", "[", 
             SubscriptBox["q", "5"], "]"}], " ", 
            SubscriptBox["u", "2"], " ", 
            SubscriptBox["u", "6"]}], "+", 
           SubsuperscriptBox["u", "6", "2"], "+", 
           RowBox[{
            RowBox[{"Cos", "[", 
             SubscriptBox["q", "5"], "]"}], " ", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"2", " ", 
               SubscriptBox["q", "6"], " ", 
               SubscriptBox["u", "2"], " ", 
               SubscriptBox["u", "5"]}], "+", 
              RowBox[{"2", " ", 
               SubscriptBox["u", "1"], " ", 
               SubscriptBox["u", "6"]}]}], ")"}]}]}], ")"}]}]}], ")"}]}], 
     ",", "\<\"kineticEnergy2\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"-", "2"}], " ", "g", " ", 
       RowBox[{"Sin", "[", "gslope", "]"}], " ", 
       SubscriptBox["q", "1"]}], "+", 
      RowBox[{"2", " ", "g", " ", 
       RowBox[{"Cos", "[", "gslope", "]"}], " ", 
       SubscriptBox["q", "2"]}], "-", 
      RowBox[{"g", " ", 
       RowBox[{"Sin", "[", 
        RowBox[{"gslope", "-", 
         SubscriptBox["q", "3"]}], "]"}], " ", 
       SubscriptBox["q", "4"]}], "+", 
      RowBox[{
       FractionBox["1", "2"], " ", "kswing", " ", 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "swingl"}], "+", 
          SubscriptBox["q", "4"]}], ")"}], "2"]}], "+", 
      RowBox[{
       FractionBox["1", "2"], " ", "khip", " ", 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "hipl"}], "+", 
          SubscriptBox["q", "3"], "-", 
          SubscriptBox["q", "5"]}], ")"}], "2"]}], "-", 
      RowBox[{"g", " ", 
       RowBox[{"Sin", "[", 
        RowBox[{"gslope", "-", 
         SubscriptBox["q", "5"]}], "]"}], " ", 
       SubscriptBox["q", "6"]}], "+", 
      RowBox[{
       FractionBox["1", "2"], " ", "kswing", " ", 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "swingl"}], "+", 
          SubscriptBox["q", "6"]}], ")"}], "2"]}]}], 
     ",", "\<\"potentialEnergy2\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"-", "2"}], " ", "g", " ", 
       RowBox[{"Sin", "[", "gslope", "]"}], " ", 
       SubscriptBox["q", "1"]}], "+", 
      RowBox[{"2", " ", "g", " ", 
       RowBox[{"Cos", "[", "gslope", "]"}], " ", 
       SubscriptBox["q", "2"]}], "-", 
      RowBox[{"g", " ", 
       RowBox[{"Sin", "[", 
        RowBox[{"gslope", "-", 
         SubscriptBox["q", "3"]}], "]"}], " ", 
       SubscriptBox["q", "4"]}], "-", 
      RowBox[{"g", " ", 
       RowBox[{"Sin", "[", 
        RowBox[{"gslope", "-", 
         SubscriptBox["q", "5"]}], "]"}], " ", 
       SubscriptBox["q", "6"]}]}], ",", "\<\"PEgrav2\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{
       FractionBox["1", "2"], " ", "kswing", " ", 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "swingl"}], "+", 
          SubscriptBox["q", "4"]}], ")"}], "2"]}], "+", 
      RowBox[{
       FractionBox["1", "2"], " ", "khip", " ", 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "hipl"}], "+", 
          SubscriptBox["q", "3"], "-", 
          SubscriptBox["q", "5"]}], ")"}], "2"]}], "+", 
      RowBox[{
       FractionBox["1", "2"], " ", "kswing", " ", 
       SuperscriptBox[
        RowBox[{"(", 
         RowBox[{
          RowBox[{"-", "swingl"}], "+", 
          SubscriptBox["q", "6"]}], ")"}], "2"]}]}], 
     ",", "\<\"PEspring2\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      FractionBox["1", "2"], " ", "kswing", " ", 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", "swingl"}], "+", 
         SubscriptBox["q", "4"]}], ")"}], "2"]}], ",", "\<\"stanceE\"\>"}], 
    "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      FractionBox["1", "2"], " ", "kswing", " ", 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", "swingl"}], "+", 
         SubscriptBox["q", "6"]}], ")"}], "2"]}], ",", "\<\"swingE\"\>"}], 
    "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      FractionBox["1", "2"], " ", "khip", " ", 
      SuperscriptBox[
       RowBox[{"(", 
        RowBox[{
         RowBox[{"-", "hipl"}], "+", 
         SubscriptBox["q", "3"], "-", 
         SubscriptBox["q", "5"]}], ")"}], "2"]}], ",", "\<\"hipE\"\>"}], 
    "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        SubscriptBox["q", "1"], "+", 
        RowBox[{
         RowBox[{"Cos", "[", 
          SubscriptBox["q", "3"], "]"}], " ", 
         SubscriptBox["q", "4"]}]}], ",", 
       RowBox[{
        SubscriptBox["q", "2"], "+", 
        RowBox[{
         RowBox[{"Sin", "[", 
          SubscriptBox["q", "3"], "]"}], " ", 
         SubscriptBox["q", "4"]}]}]}], "}"}], 
     ",", "\<\"points.stancefoot\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        SubscriptBox["q", "1"], "+", 
        RowBox[{
         RowBox[{"Cos", "[", 
          SubscriptBox["q", "5"], "]"}], " ", 
         SubscriptBox["q", "6"]}]}], ",", 
       RowBox[{
        SubscriptBox["q", "2"], "+", 
        RowBox[{
         RowBox[{"Sin", "[", 
          SubscriptBox["q", "5"], "]"}], " ", 
         SubscriptBox["q", "6"]}]}]}], "}"}], 
     ",", "\<\"points.swingfoot\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["q", "1"], ",", 
       SubscriptBox["q", "2"]}], "}"}], ",", "\<\"points.pelvis\"\>"}], "}"}],
    ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["q", "1"], ",", 
       SubscriptBox["q", "2"]}], "}"}], ",", "\<\"points.COM\"\>"}], "}"}], 
   ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        SubscriptBox["u", "1"], "-", 
        RowBox[{
         RowBox[{"Sin", "[", 
          SubscriptBox["q", "3"], "]"}], " ", 
         SubscriptBox["q", "4"], " ", 
         SubscriptBox["u", "3"]}], "+", 
        RowBox[{
         RowBox[{"Cos", "[", 
          SubscriptBox["q", "3"], "]"}], " ", 
         SubscriptBox["u", "4"]}]}], ",", 
       RowBox[{
        SubscriptBox["u", "2"], "+", 
        RowBox[{
         RowBox[{"Cos", "[", 
          SubscriptBox["q", "3"], "]"}], " ", 
         SubscriptBox["q", "4"], " ", 
         SubscriptBox["u", "3"]}], "+", 
        RowBox[{
         RowBox[{"Sin", "[", 
          SubscriptBox["q", "3"], "]"}], " ", 
         SubscriptBox["u", "4"]}]}]}], "}"}], 
     ",", "\<\"vels.stancefoot\"\>"}], "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        SubscriptBox["u", "1"], "-", 
        RowBox[{
         RowBox[{"Sin", "[", 
          SubscriptBox["q", "5"], "]"}], " ", 
         SubscriptBox["q", "6"], " ", 
         SubscriptBox["u", "5"]}], "+", 
        RowBox[{
         RowBox[{"Cos", "[", 
          SubscriptBox["q", "5"], "]"}], " ", 
         SubscriptBox["u", "6"]}]}], ",", 
       RowBox[{
        SubscriptBox["u", "2"], "+", 
        RowBox[{
         RowBox[{"Cos", "[", 
          SubscriptBox["q", "5"], "]"}], " ", 
         SubscriptBox["q", "6"], " ", 
         SubscriptBox["u", "5"]}], "+", 
        RowBox[{
         RowBox[{"Sin", "[", 
          SubscriptBox["q", "5"], "]"}], " ", 
         SubscriptBox["u", "6"]}]}]}], "}"}], ",", "\<\"vels.swingfoot\"\>"}],
     "}"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["u", "1"], ",", 
       SubscriptBox["u", "2"]}], "}"}], ",", "\<\"vels.pelvis\"\>"}], "}"}], 
   ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       SubscriptBox["u", "1"], ",", 
       SubscriptBox["u", "2"]}], "}"}], ",", "\<\"vels.COM\"\>"}], "}"}]}], 
  "}"}]], "Output",
 CellChangeTimes->{
  3.638544652224*^9, 3.638548205138*^9, 3.638548694024*^9, 3.638549064557*^9, 
   3.6387152327205*^9, 3.6387152788045*^9, 3.6387153234175*^9, {
   3.6387159284125*^9, 3.6387159391545*^9}, 3.6387159709685*^9, 
   3.6387160562465*^9, 3.6387161380004997`*^9, 3.6387165501455*^9, 
   3.6387168516435003`*^9, 3.638808073091*^9, 3.6388081252019997`*^9, {
   3.640015882834*^9, 3.640015910699*^9}, {3.6435581070638*^9, 
   3.6435581286848*^9}, 3.6435582226078*^9, 3.6435582916837997`*^9, 
   3.6435590837008*^9, 3.6435592296808*^9, 3.6435594119728003`*^9, 
   3.6435595461258*^9, {3.6435602975898*^9, 3.6435603269158*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"Opening file \\\"\"\>", 
   "\[InvisibleSpace]", "\<\"C:\\\\Users\\\\HBCL \
Student\\\\Documents\\\\RunModels\\\\EOM \
Notebooks\\\\RetractSLIP_Aerial.m\"\>", "\[InvisibleSpace]", "\<\"\\\"\"\>"}],
  SequenceForm[
  "Opening file \"", 
   "C:\\Users\\HBCL Student\\Documents\\RunModels\\EOM \
Notebooks\\RetractSLIP_Aerial.m", "\""],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.638544652244*^9, 3.638548205158*^9, 3.6385486940439997`*^9, 
   3.6385490645769997`*^9, 3.6387152327675*^9, 3.6387152788465*^9, 
   3.6387153234635*^9, {3.6387159284575*^9, 3.6387159392015*^9}, 
   3.6387159710205*^9, 3.6387160562895*^9, 3.6387161380445004`*^9, 
   3.6387165501545*^9, 3.6387168516815*^9, 3.6388080731210003`*^9, 
   3.638808125242*^9, {3.64001588285*^9, 3.6400159107349997`*^9}, {
   3.6435581070758*^9, 3.6435581287078*^9}, 3.6435582226177998`*^9, 
   3.6435582916948*^9, 3.6435590837068*^9, 3.6435592296907997`*^9, 
   3.6435594120078*^9, 3.6435595461378*^9, {3.6435602976268*^9, 
   3.6435603269228*^9}}],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"Current directory: \"\>", 
   "\[InvisibleSpace]", "\<\"C:\\\\Users\\\\HBCL \
Student\\\\Documents\\\\RunModels\\\\EOM Notebooks\"\>"}],
  SequenceForm[
  "Current directory: ", 
   "C:\\Users\\HBCL Student\\Documents\\RunModels\\EOM Notebooks"],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.638544652244*^9, 3.638548205158*^9, 3.6385486940439997`*^9, 
   3.6385490645769997`*^9, 3.6387152327675*^9, 3.6387152788465*^9, 
   3.6387153234635*^9, {3.6387159284575*^9, 3.6387159392015*^9}, 
   3.6387159710205*^9, 3.6387160562895*^9, 3.6387161380445004`*^9, 
   3.6387165501545*^9, 3.6387168516815*^9, 3.6388080731210003`*^9, 
   3.638808125242*^9, {3.64001588285*^9, 3.6400159107349997`*^9}, {
   3.6435581070758*^9, 3.6435581287078*^9}, 3.6435582226177998`*^9, 
   3.6435582916948*^9, 3.6435590837068*^9, 3.6435592296907997`*^9, 
   3.6435594120078*^9, 3.6435595461378*^9, {3.6435602976268*^9, 
   3.6435603269238*^9}}],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"Closing file \\\"\"\>", 
   "\[InvisibleSpace]", "\<\"C:\\\\Users\\\\HBCL \
Student\\\\Documents\\\\RunModels\\\\EOM \
Notebooks\\\\RetractSLIP_Aerial.m\"\>", "\[InvisibleSpace]", "\<\"\\\"\"\>"}],
  SequenceForm[
  "Closing file \"", 
   "C:\\Users\\HBCL Student\\Documents\\RunModels\\EOM \
Notebooks\\RetractSLIP_Aerial.m", "\""],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.638544652244*^9, 3.638548205158*^9, 3.6385486940439997`*^9, 
   3.6385490645769997`*^9, 3.6387152327675*^9, 3.6387152788465*^9, 
   3.6387153234635*^9, {3.6387159284575*^9, 3.6387159392015*^9}, 
   3.6387159710205*^9, 3.6387160562895*^9, 3.6387161380445004`*^9, 
   3.6387165501545*^9, 3.6387168516815*^9, 3.6388080731210003`*^9, 
   3.638808125242*^9, {3.64001588285*^9, 3.6400159107349997`*^9}, {
   3.6435581070758*^9, 3.6435581287078*^9}, 3.6435582226177998`*^9, 
   3.6435582916948*^9, 3.6435590837068*^9, 3.6435592296907997`*^9, 
   3.6435594120078*^9, 3.6435595461378*^9, {3.6435602976268*^9, 
   3.6435603269618*^9}}]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1904, 1113},
WindowMargins->{{Automatic, 293}, {30, Automatic}},
FrontEndVersion->"9.0 for Microsoft Windows (64-bit) (November 20, 2012)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[557, 20, 86, 1, 31, "Input"],
Cell[CellGroupData[{
Cell[668, 25, 924, 23, 159, "Input"],
Cell[1595, 50, 697, 11, 31, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[2329, 66, 3211, 74, 288, "Input"],
Cell[5543, 142, 731, 12, 31, "Output"],
Cell[6277, 156, 702, 12, 31, "Output"],
Cell[6982, 170, 690, 11, 31, "Output"],
Cell[7675, 183, 714, 12, 31, "Output"],
Cell[8392, 197, 717, 12, 31, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[9146, 214, 9102, 265, 979, "Input"],
Cell[18251, 481, 860, 15, 31, "Output"],
Cell[19114, 498, 762, 11, 31, "Output"],
Cell[19879, 511, 762, 11, 31, "Output"],
Cell[20644, 524, 766, 11, 31, "Output"],
Cell[21413, 537, 2347, 60, 124, "Output"],
Cell[23763, 599, 3972, 109, 162, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[27772, 713, 5462, 165, 340, "Input"],
Cell[33237, 880, 680, 11, 31, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[33954, 896, 6222, 165, 479, "Input"],
Cell[40179, 1063, 1058, 16, 31, "Output"],
Cell[41240, 1081, 3643, 97, 154, "Output"],
Cell[44886, 1180, 5631, 157, 160, "Output"],
Cell[50520, 1339, 2022, 46, 56, "Output"],
Cell[52545, 1387, 1863, 45, 48, "Output"],
Cell[54411, 1434, 2026, 46, 56, "Output"],
Cell[56440, 1482, 2078, 47, 60, "Output"],
Cell[58521, 1531, 2510, 61, 63, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[61068, 1597, 3689, 96, 440, "Input"],
Cell[64760, 1695, 947, 16, 31, "Output"],
Cell[65710, 1713, 1197, 26, 31, "Output"],
Cell[66910, 1741, 1197, 26, 31, "Output"],
Cell[68110, 1769, 2037, 53, 48, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[70184, 1827, 3704, 97, 320, "Input"],
Cell[73891, 1926, 669, 10, 31, "Output"],
Cell[74563, 1938, 13953, 418, 247, "Output"],
Cell[CellGroupData[{
Cell[88541, 2360, 1062, 21, 23, "Print"],
Cell[89606, 2383, 975, 19, 23, "Print"],
Cell[90584, 2404, 1062, 21, 23, "Print"]
}, Open  ]]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
